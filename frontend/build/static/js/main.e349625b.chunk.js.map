{"version":3,"sources":["state/constants.js","state/store.js","state/reducers/userReducers.js","state/reducers/companyReducers.js","state/reducers/reportsReducers.js","utils/helpers.js","state/actions/userActions.js","components/NavBar.js","components/Drawer.js","components/ReportComment.js","components/Alert.js","utils/rest.js","components/ReportDetail.js","components/Backdrop.js","utils/graphql.ts","state/actions/companyActions.js","screens/Login.js","screens/NewPassword.js","components/SearchTag.js","components/SearchBar.js","components/ReportTile.js","screens/SearchReports.js","state/actions/reportsActions.js","components/Checkbox.js","components/Images.js","screens/NewReport.js","screens/EditReport.js","components/UserTile.js","screens/Company.js","screens/AddCompany.js","screens/Profile.js","App.tsx","index.tsx"],"names":["BACKEND_URL","USER_LOGIN_REQUEST","USER_LOGIN_SUCCESS","USER_LOGIN_FAIL","USER_LOGOUT","USER_PASSWORD_CHANGE_REQUEST","USER_PASSWORD_CHANGE_SUCCESS","USER_PASSWORD_CHANGE_FAILURE","USER_PASSWORD_CHANGE_CLEAR","USER_PASSWORD_RESET_REQUEST","USER_PASSWORD_RESET_SUCCESS","USER_PASSWORD_RESET_FAILURE","USER_PASSWORD_RESET_CLEAR","FETCH_REPORTS_REQUEST","FETCH_REPORTS_SUCCESS","FETCH_REPORTS_FAILURE","CLEAR_REPORTS_STATE","FETCH_COMPANY_REQUEST","FETCH_COMPANY_SUCCESS","FETCH_COMPANY_FAILURE","CLEAR_COMPANY_STATE","FETCH_COMPANY_USER_REQUEST","FETCH_COMPANY_USER_SUCCESS","FETCH_COMPANY_USER_FAILURE","CLEAR_COMPANY_USER_STATE","reducer","combineReducers","userLogin","state","action","type","loading","userInfo","payload","loggedIn","error","isAdmin","isDan","passwordChange","message","passwordReset","company","name","companyUsers","users","reports","initialState","localStorage","getItem","JSON","parse","middleware","thunk","store","createStore","composeWithDevTools","applyMiddleware","changeScheme","primaryColor","secondaryColor","page","document","getElementsByTagName","style","setProperty","schemeFromStorage","getToken","getState","token","configNoToken","headers","configToken","userId","password","newPassword","dispatch","a","axios","post","data","response","email","put","NavBar","mode","toggleMode","toggleDrawer","logout","user","useSelector","className","to","onClick","Drawer","animation","ReportComment","comment","Moment","time","format","Alert","background","icon","variant","backgroundColor","submitReport","newReport","config","catch","err","reply","editReport","editedReport","deleteReport","reportId","images","delete","id","imageUrls","authorization","addComment","addUser","deleteUsers","ids","stringify","addImage","imageInfo","fetch","method","body","file","then","res","json","console","log","removeImage","imageId","ReportDetail","setViewReport","reportDetails","setReportDetails","useState","newComment","setNewComment","commentSuccess","setCommentSuccess","commentFailure","setCommentFailure","approved","approvedBy","title","tags","shortDesc","longDesc","steps","comments","addCommentHandler","e","preventDefault","status","map","tag","index","step","length","image","src","imageUrl","alt","assetId","onSubmit","value","placeholder","onChange","target","Backdrop","props","drawer","createPortal","getElementById","graphqlRequest","query","variables","request","responseBody","getCompanyDetails","getReports","getCompanyUsers","Login","history","useDispatch","setEmail","setPassword","useEffect","companyId","companyDetails","setItem","push","size","color","login","required","NewPassword","userEmail","setUserEmail","newPasswordHandler","SearchTag","searchterm","removeSearchTerm","SearchBar","searchTerms","addSearchTerm","searchTerm","setSearchTerm","querySelector","reset","ReportTile","report","flag","forEach","includes","checkTags","SearchReports","auth","fetchedReports","setSearchTerms","unapprovedReports","setUnapprovedReports","showUnapproved","setShowUnapproved","companyID","companyReports","filtered","filter","checked","term","charAt","slice","toLowerCase","removedTerm","updatedTerms","Checkbox","reportTags","setReportTags","tagHandler","copy","Images","reportImages","setReportImages","fileInputState","setFileInputState","selectedFile","setSelectedFile","addImageHandler","files","removeImageHandler","getAttribute","result","removeFromImageArray","addToImageArray","publicId","data-publicid","reader","FileReader","readAsDataURL","onloadend","onerror","NewReport","_id","reportTitle","setReportTitle","reportShortDesc","setReportShortDesc","reportLongDesc","setReportLongDesc","reportSteps","setReportSteps","customTag","setCustomTag","newStep","setNewStep","formSubmitted","setFormSubmitted","submitSuccess","setSubmitSuccess","submitError","setSubmitError","formSubmitHandler","tagText","innerText","checkboxNodes","querySelectorAll","Array","from","checkbox","removeCustomTagHandler","addCustomTagHandler","removeIndex","split","splice","removeStepHandler","addStepHandler","EditReport","loggedInUser","editTitle","setEditTitle","editTags","setEditTags","editShortDesc","setEditShortDesc","editLongDesc","setEditLongDesc","editSteps","setEditSteps","editImages","setEditImages","editComments","setEditComments","newTag","setNewTag","reportApproved","setReportApproved","reportApprovedUser","setReportApprovedUser","submitted","setSubmitted","showConfirmDelete","setShowConfirmDelete","reportDeleted","submitEditHandler","removeTagHandler","removedTag","parentElement","indexToRemove","setShowConfirmDeleteHandler","reportDeleteHandler","onDragEnd","destination","source","newOrder","droppableId","provided","droppableProps","ref","innerRef","draggableId","draggableProps","dragHandleProps","commentId","removeCommentHandler","UserTile","checkboxHandler","Company","useReducer","submitMessage","deleteMessage","deleteError","username","userAdmin","submitLoading","deleteLoading","pageState","dispatchReducer","dispatchRedux","setDeleteUsers","newUserHandler","addUserRest","deleteUsersHandler","deleteUsersRest","AddCompany","Profile","passwordChangeState","currentPassword","setCurrentPassword","setNewPassword","confirmNewPassword","setConfirmNewPassword","passwordMismatch","setPasswordMismatch","changePasswordHandler","App","setMode","setDrawer","viewReport","trans","documentElement","classList","add","window","setTimeout","remove","removeItem","setAttribute","path","exact","component","render","ReactDOM"],"mappings":"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","file":"static/js/main.e349625b.chunk.js","sourcesContent":["//export const BACKEND_URL = 'http://localhost:3001';\r\nexport const BACKEND_URL = 'https://techlog-server-y7u7n.ondigitalocean.app';\r\n\r\nexport const USER_LOGIN_REQUEST = 'USER_LOGIN_REQUEST';\r\nexport const USER_LOGIN_SUCCESS = 'USER_LOGIN_SUCCESS';\r\nexport const USER_LOGIN_FAIL = 'USER_LOGIN_FAIL';\r\nexport const USER_LOGOUT = 'USER_LOGOUT';\r\n\r\nexport const USER_PASSWORD_CHANGE_REQUEST = 'USER_PASSWORD_CHANGE_REQUEST';\r\nexport const USER_PASSWORD_CHANGE_SUCCESS = 'USER_PASSWORD_CHANGE_SUCCESS';\r\nexport const USER_PASSWORD_CHANGE_FAILURE = 'USER_PASSWORD_CHANGE_FAILURE';\r\nexport const USER_PASSWORD_CHANGE_CLEAR = 'USER_PASSWORD_CHANGE_CLEAR';\r\n\r\nexport const USER_PASSWORD_RESET_REQUEST = 'USER_PASSWORD_RESET_REQUEST';\r\nexport const USER_PASSWORD_RESET_SUCCESS = 'USER_PASSWORD_RESET_SUCCESS';\r\nexport const USER_PASSWORD_RESET_FAILURE = 'USER_PASSWORD_RESET_FAILURE';\r\nexport const USER_PASSWORD_RESET_CLEAR = 'USER_PASSWORD_CHANGE_CLEAR';\r\n\r\nexport const FETCH_REPORTS_REQUEST = 'FETCH_REPORTS_REQUEST';\r\nexport const FETCH_REPORTS_SUCCESS = 'FETCH_REPORTS_SUCCESS';\r\nexport const FETCH_REPORTS_FAILURE = 'FETCH_REPORTS_FAILURE';\r\nexport const CLEAR_REPORTS_STATE = 'CLEAR_REPORTS_STATE';\r\n\r\nexport const FETCH_COMPANY_REQUEST = 'FETCH_COMPANY_REQUEST';\r\nexport const FETCH_COMPANY_SUCCESS = 'FETCH_COMPANY_SUCCESS';\r\nexport const FETCH_COMPANY_FAILURE = 'FETCH_COMPANY_FAILURE';\r\nexport const CLEAR_COMPANY_STATE = 'CLEAR_COMPANY_STATE';\r\n\r\nexport const FETCH_COMPANY_USER_REQUEST = 'FETCH_COMPANY_USER_REQUEST';\r\nexport const FETCH_COMPANY_USER_SUCCESS = 'FETCH_COMPANY_USER_SUCCESS';\r\nexport const FETCH_COMPANY_USER_FAILURE = 'FETCH_COMPANY_USER_FAILURE';\r\nexport const CLEAR_COMPANY_USER_STATE = 'CLEAR_COMPANY_USER_STATE';\r\n\r\n\r\n","import { createStore, combineReducers, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\n//IMPORT REDUCERS\r\nimport { userLoginReducer, passwordChangeReducer, passwordResetReducer } from './reducers/userReducers.js';\r\nimport { fetchReportsReducer } from './reducers/reportsReducers.js';\r\nimport { fetchCompanyReducer, fetchCompanyUserReducer } from './reducers/companyReducers.js';\r\n\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\n\r\nconst reducer = combineReducers({\r\n  userLogin : userLoginReducer,\r\n  passwordChange: passwordChangeReducer,\r\n  passwordReset: passwordResetReducer,\r\n  company: fetchCompanyReducer,\r\n  companyUsers: fetchCompanyUserReducer,\r\n  reports : fetchReportsReducer,\r\n});\r\n\r\n//LOCAL STORAGE FOR LOGGED IN USER\r\nconst userFromStorage = localStorage.getItem('userInfo')\r\n  ? { userInfo: JSON.parse(localStorage.getItem('userInfo')), loggedIn: true}\r\n  : { userInfo: { isAdmin: false, isDan: false}, loggedIn: false}\r\n\r\n//LOCAL STORAGE FOR LOGGED IN COMPANY\r\nconst companyFromStorage = localStorage.getItem('companyInfo')\r\n  ? { company: JSON.parse(localStorage.getItem('companyInfo'))}\r\n  : {}\r\n \r\nconst initialState = {\r\n  userLogin: userFromStorage,\r\n  company: companyFromStorage,\r\n  reports: []\r\n};\r\n\r\nconst middleware = [thunk];\r\n\r\nconst store = createStore(\r\n  reducer,\r\n  initialState,\r\n  composeWithDevTools(applyMiddleware(...middleware))\r\n)\r\n\r\nexport default store\r\n\r\n","import {\r\n  USER_LOGIN_REQUEST,\r\n  USER_LOGIN_SUCCESS,\r\n  USER_LOGIN_FAIL,\r\n  USER_LOGOUT,\r\n  USER_PASSWORD_CHANGE_REQUEST,\r\n  USER_PASSWORD_CHANGE_SUCCESS,\r\n  USER_PASSWORD_CHANGE_FAILURE,\r\n  USER_PASSWORD_CHANGE_CLEAR,\r\n  USER_PASSWORD_RESET_REQUEST,\r\n  USER_PASSWORD_RESET_SUCCESS,\r\n  USER_PASSWORD_RESET_FAILURE,\r\n  USER_PASSWORD_RESET_CLEAR\r\n} from '../constants.js'\r\n\r\nexport const userLoginReducer = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case USER_LOGIN_REQUEST:\r\n      return { ...state, loading: true }\r\n    case USER_LOGIN_SUCCESS:   \r\n      return { loading: false, userInfo: action.payload, loggedIn: true}\r\n    case USER_LOGIN_FAIL:\r\n      return { ...state, loading: false, error: action.payload}\r\n    case USER_LOGOUT: \r\n      return {userInfo: {}, isAdmin: false, isDan: false, loggedIn: false}\r\n    default:\r\n      return state;  \r\n  }\r\n}\r\n\r\nexport const passwordChangeReducer = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case USER_PASSWORD_CHANGE_REQUEST:\r\n      return {loading: true }\r\n    case USER_PASSWORD_CHANGE_SUCCESS:\r\n      return {loading: false, message: action.payload}\r\n    case USER_PASSWORD_CHANGE_FAILURE:\r\n      return {loading: false, error: action.payload}\r\n    case USER_PASSWORD_CHANGE_CLEAR:\r\n      return {}\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport const passwordResetReducer = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case USER_PASSWORD_RESET_REQUEST:\r\n      return {loading: true }\r\n    case USER_PASSWORD_RESET_SUCCESS:\r\n      return {loading: false, message: action.payload}\r\n    case USER_PASSWORD_RESET_FAILURE:\r\n      return {loading: false, error: action.payload}\r\n    case USER_PASSWORD_RESET_CLEAR: \r\n      return {}\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {\r\n  FETCH_COMPANY_REQUEST,\r\n  FETCH_COMPANY_SUCCESS,\r\n  FETCH_COMPANY_FAILURE,\r\n  CLEAR_COMPANY_STATE,\r\n  FETCH_COMPANY_USER_REQUEST,\r\n  FETCH_COMPANY_USER_SUCCESS,\r\n  FETCH_COMPANY_USER_FAILURE,\r\n  CLEAR_COMPANY_USER_STATE,\r\n} from '../constants.js';\r\n\r\nexport const fetchCompanyReducer = (state = {name: null}, action) => {\r\n  switch (action.type) {\r\n    case FETCH_COMPANY_REQUEST:\r\n      return { ...state }\r\n    case FETCH_COMPANY_SUCCESS:   \r\n      return {company: action.payload}\r\n    case FETCH_COMPANY_FAILURE:\r\n      return { ...state, error: action.payload}\r\n    case CLEAR_COMPANY_STATE:\r\n      return {...state, company: {} }\r\n    default:\r\n      return state;  \r\n  }\r\n}\r\n\r\nexport const fetchCompanyUserReducer = (state = [], action) => {\r\n  switch (action.type) {\r\n    case FETCH_COMPANY_USER_REQUEST:\r\n      return { ...state, loading: true }\r\n    case FETCH_COMPANY_USER_SUCCESS:   \r\n      return {loading: false, users: action.payload}\r\n    case FETCH_COMPANY_USER_FAILURE:\r\n      return {loading: false, error: action.payload}\r\n    case CLEAR_COMPANY_USER_STATE:\r\n      return {users: [] }\r\n    default:\r\n      return state;  \r\n  }\r\n}\r\n","import {\r\n  FETCH_REPORTS_REQUEST,\r\n  FETCH_REPORTS_SUCCESS,\r\n  FETCH_REPORTS_FAILURE,\r\n  CLEAR_REPORTS_STATE\r\n} from '../constants.js';\r\n\r\nexport const fetchReportsReducer = (state = [], action) => {\r\n  switch (action.type) {\r\n    case FETCH_REPORTS_REQUEST:\r\n      return { ...state, loading: true }\r\n    case FETCH_REPORTS_SUCCESS:   \r\n      return { loading: false, reports: action.payload}\r\n    case FETCH_REPORTS_FAILURE:\r\n      return { ...state, loading: false, error: action.payload}  \r\n    case CLEAR_REPORTS_STATE:\r\n      return {...state, reports: []}  \r\n    default:\r\n      return state;  \r\n  }\r\n}","import store from '../state/store';\r\n\r\n//CHANGE SCHEME ON LOGIN\r\nexport const changeScheme = (primaryColor, secondaryColor) => {\r\n  const page = document.getElementsByTagName('html')[0];\r\n  page.style.setProperty('--color-primary', primaryColor);\r\n  page.style.setProperty('--color-secondary', secondaryColor);\r\n}\r\n\r\n//IIFE TO MAINTAIN SCHEME WHEN REFRESHING PAGE\r\n(function schemeFromStorage () {\r\n  const schemeFromStorage = localStorage.getItem('companyInfo');\r\n  if (schemeFromStorage) {\r\n    const { primaryColor, secondaryColor } = JSON.parse(schemeFromStorage);\r\n    changeScheme(primaryColor, secondaryColor);\r\n  }\r\n})();\r\n\r\n//GET TOKEN FROM LOCAL STORAGE\r\nexport const getToken = () => {\r\n  const state = store.getState();\r\n  return state.userLogin.userInfo.token;\r\n}\r\n\r\n","import axios from 'axios';\r\nimport { getToken } from '../../utils/helpers.js'\r\n\r\nimport {\r\n  BACKEND_URL,\r\n  USER_LOGIN_REQUEST,\r\n  USER_LOGIN_SUCCESS,\r\n  USER_LOGIN_FAIL,\r\n  USER_LOGOUT,\r\n  CLEAR_REPORTS_STATE,\r\n  CLEAR_COMPANY_STATE,\r\n  USER_PASSWORD_CHANGE_REQUEST,\r\n  USER_PASSWORD_CHANGE_SUCCESS,\r\n  USER_PASSWORD_CHANGE_FAILURE,\r\n  USER_PASSWORD_CHANGE_CLEAR,\r\n  USER_PASSWORD_RESET_REQUEST,\r\n  USER_PASSWORD_RESET_SUCCESS,\r\n  USER_PASSWORD_RESET_FAILURE,\r\n  // eslint-disable-next-line\r\n  USER_PASSWORD_RESET_CLEAR,\r\n} from '../constants.js';\r\n\r\nconst configNoToken = {\r\n  headers: {\r\n    'Content-Type':'application/json'\r\n  }\r\n}\r\n\r\nconst configToken = {\r\n  headers: {\r\n    'Content-Type':'application/json',\r\n    'Authorization' : `Bearer ${getToken()}`\r\n  }\r\n}\r\n\r\nexport const login = (email, password) => async (dispatch) => {\r\n  \r\n  try {\r\n    dispatch({\r\n      type: USER_LOGIN_REQUEST\r\n    });\r\n\r\n    const { data } = await axios.post(`${BACKEND_URL}/login`, {email, password}, configNoToken);\r\n\r\n    dispatch({\r\n      type: USER_LOGIN_SUCCESS,\r\n      payload: data\r\n    })\r\n\r\n    //SET USER IN LOCAL STORAGE\r\n    localStorage.setItem('userInfo', JSON.stringify(data));\r\n\r\n  } catch (err) {\r\n    \r\n    dispatch({\r\n      type: USER_LOGIN_FAIL,\r\n      payload: err.response\r\n    })\r\n  }\r\n}\r\n\r\nexport const logout = () => (dispatch) => {\r\n  localStorage.removeItem('userInfo');\r\n  localStorage.removeItem('companyInfo');\r\n  dispatch({ type: USER_LOGOUT});\r\n  dispatch({ type: CLEAR_REPORTS_STATE});\r\n  dispatch({ type: CLEAR_COMPANY_STATE});\r\n  dispatch({ type: USER_PASSWORD_CHANGE_CLEAR});\r\n}\r\n\r\nexport const passwordChange = (userId, password, newPassword) => async (dispatch) => {\r\n\r\n  try {\r\n\r\n    dispatch({\r\n      type: USER_PASSWORD_CHANGE_REQUEST\r\n    });\r\n\r\n    const { data } = await axios.post(`${BACKEND_URL}/password`, {userId, password, newPassword}, configToken);\r\n\r\n    dispatch({\r\n      type: USER_PASSWORD_CHANGE_SUCCESS,\r\n      payload: data\r\n    });\r\n\r\n  } catch (err) {\r\n\r\n    dispatch({\r\n      type: USER_PASSWORD_CHANGE_FAILURE,\r\n      payload: err.response\r\n    })\r\n  }\r\n}\r\n\r\nexport const passwordReset = (email) => async (dispatch) => {\r\n\r\n  try {\r\n\r\n    dispatch({\r\n      type: USER_PASSWORD_RESET_REQUEST\r\n    });\r\n\r\n    const { data } = await axios.put(`${BACKEND_URL}/password`, {email}, configToken);\r\n\r\n    dispatch({\r\n      type: USER_PASSWORD_RESET_SUCCESS,\r\n      payload: data\r\n    });\r\n\r\n  } catch (err) {\r\n\r\n    dispatch({\r\n      type: USER_PASSWORD_RESET_FAILURE,\r\n      payload: err.response\r\n    })\r\n  }\r\n}","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport '../styles/Components/Navbar.scss'\r\n\r\nconst NavBar = ({mode, toggleMode, toggleDrawer, logout}) => {\r\n\r\n  const user = useSelector((state) => state.userLogin);\r\n  const { loggedIn, userInfo: { isAdmin, isDan } } = user;\r\n\r\n  const company = useSelector((state) => state.company.company);\r\n  \r\n  return (\r\n    <nav className=\"navbar\">\r\n\r\n      <div className=\"navbar-title\">\r\n        <Link to='/search'>\r\n          <div className=\"navbar-logo\">\r\n            <i className=\"fas fa-cogs fa-2x\"></i>\r\n            <h2>TechLog</h2>\r\n          </div>\r\n        </Link>\r\n        {company && <h1 className=\"navbar-company-name\">{company.name}</h1>}\r\n      </div>\r\n      \r\n      <div className=\"navbar-links\">\r\n        {(loggedIn) &&<Link to='/search'>Search</Link>}\r\n        {(loggedIn) &&<Link to='/newreport'>New Report</Link>}\r\n        {(loggedIn & isAdmin) ? <Link to='/company'>My Company</Link> : null}\r\n        {(loggedIn & isAdmin & isDan) ? <Link to='/addcompany'>Add Company</Link> : null}\r\n        {(loggedIn) && <Link to='/profile'>My Profile</Link>}\r\n        {(loggedIn) && <Link to='/' onClick={logout}>Logout</Link>}\r\n        {(loggedIn) && <button \r\n          className=\"navbar-mode-switch\"\r\n          onClick={toggleMode}>{mode === 'light' \r\n          ? <i className=\"fas fa-moon fa-2x\"></i> \r\n          : <i className=\"fas fa-sun fa-2x\"></i>}\r\n        </button>}\r\n      </div>\r\n\r\n      <div className=\"navbar-burger\">\r\n        {(loggedIn) \r\n        ? <button\r\n            className=\"navbar-burger-switch\"\r\n            onClick={toggleDrawer}\r\n            >\r\n            <i className=\"fas fa-bars fa-2x\"></i>\r\n          </button> \r\n        : null}\r\n      </div>\r\n      \r\n    </nav>\r\n  )\r\n}\r\n\r\nexport default NavBar\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport '../styles/App.scss';\r\nimport '../styles/Drawer.scss';\r\n\r\nconst Drawer = ({toggleDrawer, logout}) => {\r\n\r\n  const user = useSelector((state) => state.userLogin.userInfo);\r\n  const { isAdmin } = user;\r\n\r\n  const logoutHandler = () => {\r\n    logout();\r\n    toggleDrawer();\r\n  }\r\n\r\n  return (\r\n    <div className=\"drawer-container\" style={{animation: 'slideIn 1s forwards'}}>\r\n      <button onClick={toggleDrawer}>X</button>\r\n      <div className=\"drawer-links\">\r\n        <Link to='/search' onClick={toggleDrawer}>Search Reports</Link>\r\n        <Link to='/newreport' onClick={toggleDrawer}>New Report</Link>\r\n        {isAdmin ? <Link to='/company' onClick={toggleDrawer}>My Company</Link> : null}\r\n        <Link to='/profile' onClick={toggleDrawer}>My Profile</Link>\r\n        <Link to='/login' onClick={logoutHandler}>Logout</Link>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Drawer\r\n","import React from 'react';\r\n\r\nimport Moment from 'moment';\r\n\r\nimport '../styles/Components/ReportDetails.scss';\r\n\r\nconst ReportComment = ({comment}) => {\r\n\r\n  return (\r\n    <div className=\"report-comment\">\r\n      <p>{comment.comment}</p>\r\n      <div className=\"comment-details\">\r\n        <p>{comment.user}</p>\r\n        <p>{Moment(comment.time).format(\"MMM Do h:mm a\")}</p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ReportComment\r\n","import React from 'react';\r\n\r\nimport '../styles/Components/Alert.scss'\r\n\r\nconst Alert = ({message, variant}) => {\r\n\r\n  let background, icon;\r\n\r\n  if (variant === 'success') {\r\n    background = 'var(--color-success)';\r\n    icon = 'far fa-check-circle';\r\n  } else if (variant === 'info') {\r\n    background = 'var(--color-info)';\r\n    icon = 'far fa-question-circle';\r\n  } else {\r\n    background = 'var(--color-danger)';\r\n    icon = 'far fa-times-circle';\r\n  }\r\n\r\n  return (\r\n    <div className=\"alert-container\" style={{backgroundColor : background, animation: 'fadeIn 1s forwards'}}>\r\n      <i className={icon}></i>\r\n      <p className=\"alert-message\">{message}</p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Alert\r\n","import axios from 'axios';\r\nimport { getToken } from './helpers.js'\r\n\r\n//const BACKEND_URL = 'http://localhost:3001';\r\nconst BACKEND_URL = 'https://techlog-server-y7u7n.ondigitalocean.app';\r\n\r\n//ADD NEW REPORT\r\nexport const submitReport = async (newReport) => {\r\n\r\n  const config = {\r\n    headers: {\r\n      'Content-Type':'application/json',\r\n      'Authorization': `Bearer ${getToken()}`\r\n    }\r\n  }\r\n\r\n  const reply = await axios.post(`${BACKEND_URL}/report`, {newReport}, config).catch(err => err.response);\r\n  return reply;\r\n}\r\n\r\n//EDIT EXISTING REPORT\r\nexport const editReport = async (editedReport) => {\r\n\r\n  const config = {\r\n    headers: {\r\n      'Content-Type':'application/json',\r\n      'Authorization': `Bearer ${getToken()}`\r\n    }\r\n  }\r\n\r\n  const reply = await axios.put(`${BACKEND_URL}/report`, {editedReport}, config).catch(err => err.response);\r\n  return reply;\r\n}\r\n\r\n//DELETE REPORT\r\nexport const deleteReport = async (reportId, images) => {\r\n\r\n  //FORMAT OF BODY IMPORTANT FOR AXIOS.DELETE\r\n  //TOKEN HAS TO GO ON BODY FOR AXIOS.DELETE\r\n  const reply = await axios.delete(`${BACKEND_URL}/report`, {data: {id: reportId, imageUrls: images, authorization: `Bearer ${getToken()}`}}).catch(err => err.response);\r\n  return reply;\r\n}\r\n\r\n//ADD SINGLE COMMENT FROM REPORT PAGE\r\nexport const addComment = async (reportId, comment, user) => {\r\n\r\n  const config = {\r\n    headers: {\r\n      'Content-Type':'application/json',\r\n      'Authorization': `Bearer ${getToken()}`\r\n    }\r\n  }\r\n\r\n  const reply = await axios.post(`${BACKEND_URL}/comment`, {reportId, comment, user}, config).catch(err => err.response);\r\n  return reply;\r\n\r\n}\r\n\r\n//ADD USER TO COMPANY\r\nexport const addUser = async (name, email, isAdmin, company) => {\r\n\r\n  const config = {\r\n    headers: {\r\n      'Content-Type':'application/json',\r\n      'Authorization': `Bearer ${getToken()}`\r\n    }\r\n  }\r\n\r\n  let reply = await axios.post(`${BACKEND_URL}/user`, {name, email, isAdmin, company}, config).catch(err => err.response);  //RETURNS ERROR\r\n  return reply;\r\n}\r\n\r\n//REMOVE USER(S) FROM COMPANY\r\nexport const deleteUsers = async (ids) => {\r\n\r\n  const data = JSON.stringify(ids);  //STRINGIFY ARRAY\r\n  const reply = await axios.delete(`${BACKEND_URL}/user`, {data: {ids: data, authorization: `Bearer ${getToken()}`}}).catch(err => err.response);\r\n  return reply;\r\n\r\n}\r\n\r\n//ADD IMAGE TO CLOUDINARY VIA SERVER\r\nexport const addImage = async (imageInfo, company) => {\r\n\r\n  let reply;\r\n  \r\n  await fetch(`${BACKEND_URL}/image`, {\r\n    method: 'POST',\r\n    body: JSON.stringify({ file: imageInfo, company: company }),\r\n    headers: { \r\n      'Content-Type': 'application/json', \r\n      'Authorization': `Bearer ${getToken()}`},\r\n  }).then(res => res.json())\r\n    .then(data => reply = data)\r\n    .catch(err => console.log('IMAGE UPLOAD FETCH ERROR', err));\r\n\r\n  return reply;\r\n}\r\n\r\n//DELETE IMAGE FROM CLOUDINARY VIA SERVER\r\nexport const removeImage = async (imageId) => {\r\n\r\n  let reply;\r\n\r\n  await fetch(`${BACKEND_URL}/image`, {\r\n    method: 'PUT',\r\n    body: JSON.stringify({ data: imageId }),\r\n    headers: { 'Content-Type': 'application/json', \r\n               'Authorization': `Bearer ${getToken()}`},\r\n  }).then(res => res.json())\r\n    .then(data => reply = data)\r\n    .catch(err => console.log('IMAGE DELETE FETCH ERROR', err));\r\n\r\n    return reply;\r\n}\r\n\r\n","import React, { useState } from 'react';\r\n/*NOTE MODAL IS OUTSIDE OF SWITCH SO HAVE TO USE LINK TAG TO ROUTE TO '/editreport'*/\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport ReportComment from './ReportComment';\r\nimport Alert from './Alert';\r\n\r\nimport {addComment} from '../utils/rest';\r\n\r\nimport '../styles/Components/ReportDetails.scss';\r\n\r\nconst ReportDetail = ({setViewReport, reportDetails, setReportDetails }) => {\r\n\r\n  const [newComment, setNewComment] = useState('');\r\n  const [commentSuccess, setCommentSuccess] = useState(false);\r\n  const [commentFailure, setCommentFailure] = useState(false);\r\n\r\n  const loggedUser = useSelector((state) => state.userLogin);\r\n  const {userInfo: {name, isAdmin}} = loggedUser;\r\n\r\n  const {\r\n    id,\r\n    approved,\r\n    approvedBy,\r\n    title,\r\n    user,\r\n    tags,\r\n    shortDesc,\r\n    longDesc,\r\n    steps,\r\n    images,\r\n    comments\r\n  } = reportDetails;\r\n\r\n  const backToSearchHandler = () => {\r\n    setViewReport(false);\r\n    setReportDetails({});\r\n  }\r\n\r\n  const toEditHandler = () => {\r\n    setViewReport(false);\r\n  }\r\n\r\n  const addCommentHandler = async (e) => {\r\n    e.preventDefault();\r\n    //SEND REPORT ID, COMMENT AND USER COMMENTING\r\n    if(newComment !== '') {\r\n      const reply = await addComment(id, newComment, name);\r\n      if (reply.status === 201) {\r\n        setCommentSuccess(true);\r\n        setNewComment('');\r\n      } else {\r\n        setCommentFailure(true);\r\n      }\r\n    }  \r\n  }\r\n\r\n  return (\r\n    <div className=\"report-details\" style={{animation: 'slideUp 1s forwards'}}>\r\n\r\n      {approved ? \r\n        <div className=\"report-approved\">\r\n          <p>Reviewed by {approvedBy.name}</p>\r\n        </div> :\r\n        <div className=\"report-unapproved\">\r\n          <p>Awaiting review...</p>\r\n        </div>  \r\n      }\r\n\r\n      <div className=\"report-title\">\r\n          <div className=\"report-author\">\r\n            <p>Report Author: {user.name}</p>\r\n            <p>Contact: {user.email}</p>\r\n          </div>\r\n        <h2>{title}</h2>\r\n      </div>\r\n  \r\n      <h4>Search Tags</h4>\r\n      <ul className=\"report-tags\">\r\n        {tags.map((tag, index) => {\r\n          return <li key={index}>#{tag}</li>\r\n        })}\r\n      </ul>\r\n\r\n      <h4>Overview</h4>\r\n      <p>{shortDesc}</p>\r\n\r\n      <h4>Detailed</h4>\r\n      <p>{longDesc}</p>\r\n\r\n      {steps && <>\r\n        <h4>Steps</h4>\r\n            <ul>\r\n              {steps.map((step, index) => {\r\n                return <li key={index}>{index + 1}: {step}</li>\r\n              })}\r\n            </ul>\r\n      </>}\r\n    \r\n      {images.length > 0 && <>\r\n        <h4>Images</h4>\r\n        <ul>\r\n          {images.map(image  => {\r\n              return <img \r\n                className=\"report-detail-image\"\r\n                key={image.assetId}\r\n                src={image.imageUrl} \r\n                alt={image.assetId}\r\n                />\r\n            })}\r\n        </ul>\r\n      </>}\r\n      \r\n      <div className=\"report-details-buttons\">\r\n        <button onClick={backToSearchHandler}>BACK TO SEARCH</button>\r\n        {isAdmin && \r\n          <Link to='/editreport'>\r\n          <button onClick={toEditHandler}>EDIT REPORT</button>\r\n          </Link>}\r\n      </div>\r\n      \r\n      <h4>Comments</h4>\r\n      {comments.length > 0 ? <>\r\n        <ul>\r\n          {comments.map((comment, index) => {\r\n            return <ReportComment key={index} comment={comment}/>\r\n          })}\r\n        </ul>\r\n      </> : <p>No comments yet...</p>}\r\n\r\n      {commentSuccess && \r\n        <Alert \r\n          message={'Comment submitted!'}\r\n          variant={'success'}\r\n        ></Alert>}\r\n      {commentFailure && \r\n        <Alert \r\n          message={'Something went wrong...'}\r\n          variant={'danger'}\r\n        ></Alert>}\r\n\r\n      <form className=\"submit-comment\" onSubmit={addCommentHandler}>\r\n        <textarea \r\n          value={newComment} \r\n          placeholder=\"Add a comment...\"\r\n          onChange={(e)=>{setNewComment(e.target.value)}}\r\n        />\r\n        <button type=\"submit\">ADD COMMENT</button>\r\n      </form>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ReportDetail\r\n","import React from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\nimport '../styles/App.scss';\r\n\r\nimport Drawer from './Drawer';\r\nimport ReportDetail from './ReportDetail';\r\n\r\nconst Backdrop = (props) => {\r\n\r\n  const { toggleDrawer, logout, drawer } = props;\r\n\r\n  //IF DRAWER ACTIVATED, RETURN DRAWER\r\n  if (drawer) {    \r\n    return createPortal(\r\n      <div className=\"backdrop-container\">\r\n        <Drawer toggleDrawer={toggleDrawer} logout={logout}>Drawer</Drawer>\r\n      </div>, document.getElementById('backdrop-hook')\r\n    );\r\n  }\r\n\r\n  const { setViewReport, reportDetails, setReportDetails } = props;\r\n\r\n  //OTHERWISE RETURN REPORT DETAILS\r\n  return createPortal(\r\n    <div className=\"backdrop-container\">\r\n      <ReportDetail setViewReport={setViewReport} reportDetails={reportDetails} setReportDetails={setReportDetails}/>\r\n    </div>, document.getElementById('backdrop-hook')\r\n  );\r\n\r\n}\r\n\r\nexport default Backdrop\r\n","\r\n//const BACKEND_URL : string = 'http://localhost:3001/graphql'; \r\nconst BACKEND_URL : string = 'https://techlog-server-y7u7n.ondigitalocean.app/graphql';\r\n\r\n//GRAPHQL FETCH FACTORY\r\nasync function graphqlRequest(query: String, variables={}) {\r\n\r\n  const request = {\r\n    method: 'POST',\r\n    headers: {'content-type':'application/json'},\r\n    body: JSON.stringify({\r\n      query: query,\r\n      variables: variables\r\n    })\r\n  };\r\n  const response = await fetch(BACKEND_URL, request)\r\n  const responseBody = await response.json();\r\n  return responseBody.data;\r\n}\r\n\r\nexport async function getCompanyDetails(id: any) {\r\n  const query = `\r\n    query($id:ID!){\r\n      companyDetails(id:$id){\r\n        name\r\n        address\r\n        primaryColor\r\n        secondaryColor\r\n        logoUrl\r\n      }\r\n    }\r\n  `;\r\n  const data = await graphqlRequest(query, {id:id});\r\n  return data;\r\n}\r\n\r\n\r\nexport async function getReports(id: any) {\r\n  const query = `\r\n    query($id:ID!){\r\n      companyReports(id:$id){\r\n        id\r\n        title\r\n        user {\r\n            id\r\n            name\r\n            email\r\n        }\r\n        company {\r\n          id\r\n          name\r\n        }\r\n        tags\r\n        shortDesc\r\n        longDesc\r\n        steps\r\n        images {\r\n          id\r\n          assetId\r\n          publicId\r\n          imageUrl\r\n        }\r\n        comments {\r\n          id\r\n          user\r\n          comment\r\n          time\r\n        }\r\n        approved\r\n        approvedBy {\r\n          id\r\n          name\r\n          email\r\n        }\r\n      }\r\n    }\r\n  `;\r\n  const data = await graphqlRequest(query, {id:id});\r\n  return data;\r\n}\r\n\r\nexport async function getCompanyUsers (id: any) {\r\n  const query = `\r\n    query ($id:ID!){\r\n      companyDetails(id:$id) {\r\n        users {\r\n          id\r\n          name\r\n          email\r\n          isAdmin\r\n        }\r\n      }\r\n    }\r\n  `;\r\n  const data = await graphqlRequest(query, {id:id});\r\n  return data;\r\n}","import { getCompanyDetails, getCompanyUsers } from '../../utils/graphql';\r\n\r\nimport { changeScheme } from '../../utils/helpers';\r\n\r\nimport {\r\n  FETCH_COMPANY_REQUEST,\r\n  FETCH_COMPANY_SUCCESS,\r\n  FETCH_COMPANY_FAILURE,\r\n  FETCH_COMPANY_USER_REQUEST,\r\n  FETCH_COMPANY_USER_SUCCESS,\r\n  FETCH_COMPANY_USER_FAILURE,\r\n} from '../constants.js';\r\n\r\nexport const fetchCompany = () => async (dispatch, getState) => {\r\n  \r\n  try {\r\n\r\n    const companyId = getState().userLogin.userInfo.company;\r\n\r\n    dispatch({\r\n      type: FETCH_COMPANY_REQUEST\r\n    });\r\n\r\n    const { companyDetails } = await getCompanyDetails(companyId);\r\n    const { primaryColor, secondaryColor } = companyDetails;\r\n\r\n    dispatch({\r\n      type: FETCH_COMPANY_SUCCESS,\r\n      payload: companyDetails\r\n    });\r\n\r\n    changeScheme(primaryColor, secondaryColor);\r\n\r\n    //SET COMPANY IN LOCAL STORAGE\r\n    localStorage.setItem('companyInfo', JSON.stringify(companyDetails));\r\n\r\n  } catch (err) {\r\n    dispatch({\r\n      type: FETCH_COMPANY_FAILURE,\r\n      payload: err.response\r\n    });\r\n  }\r\n}\r\n\r\nexport const fetchCompanyUsers = () => async (dispatch, getState) => {\r\n  try {\r\n\r\n    dispatch({\r\n      type: FETCH_COMPANY_USER_REQUEST\r\n    });\r\n\r\n    const companyId = getState().userLogin.userInfo.company;\r\n\r\n    const result = await getCompanyUsers(companyId);\r\n\r\n    const users = result.companyDetails.users;\r\n\r\n    dispatch({\r\n      type: FETCH_COMPANY_USER_SUCCESS,\r\n      payload: users\r\n    });\r\n\r\n  } catch (err) {\r\n    dispatch({\r\n      type: FETCH_COMPANY_USER_FAILURE,\r\n      payload: err.response\r\n    });\r\n  }\r\n}\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { login } from '../state/actions/userActions';\r\nimport { fetchCompany } from '../state/actions/companyActions';\r\n\r\nimport Alert from '../components/Alert';\r\n\r\nimport { BeatLoader } from 'react-spinners';\r\n\r\nimport '../styles/Screens/Login.scss';\r\n\r\nconst Login = ({history}) => {\r\n\r\n  //APP STATE\r\n  const dispatch = useDispatch();\r\n  const userLogin = useSelector(state => state.userLogin);\r\n  const { loading, error, loggedIn } = userLogin;\r\n\r\n  //LOCAL STATE\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('')\r\n\r\n  //SUCCESSFUL LOGIN - GET COMPANY DETAILS\r\n  useEffect(() => {\r\n    if (loggedIn) {\r\n    dispatch(fetchCompany());  \r\n    history.push('/search');\r\n    }\r\n  }, [loggedIn, history, dispatch])\r\n\r\n  const loginUser = (e) => {\r\n    e.preventDefault();\r\n    dispatch(login(email, password));\r\n  }\r\n\r\n  return (\r\n    <div className=\"login-container\">\r\n    {loading \r\n    ? <BeatLoader size={40} color={'#C0C0C0'}/>\r\n    :<form onSubmit={loginUser}>\r\n        <label>Email:</label>\r\n        <input \r\n          type=\"email\" \r\n          placeholder=\"Please enter email...\"\r\n          required\r\n          onChange={(e) => setEmail(e.target.value)}></input>\r\n        <label>Password:</label>\r\n        <input \r\n          type=\"password\" \r\n          placeholder=\"Please enter password...\"\r\n          required\r\n          onChange={(e) => setPassword(e.target.value)}></input>\r\n        <button type=\"submit\" className=\"login-btn\">Log in!</button>\r\n        <span className=\"login-forgot-password\"><Link to=\"/newpassword\">Forgot your password?</Link></span>\r\n        {error && <Alert message={error.data.message}/>}\r\n      </form>\r\n    }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { passwordReset } from '../state/actions/userActions.js';\r\nimport { USER_PASSWORD_RESET_CLEAR } from '../state/constants.js';\r\n\r\nimport { BeatLoader } from 'react-spinners';\r\n\r\nimport Alert from '../components/Alert.js';\r\n\r\nimport '../styles/Screens/NewPassword.scss';\r\n\r\nconst NewPassword = () => {\r\n\r\n  const [userEmail, setUserEmail] = useState('');\r\n\r\n  const { loading, message, error } = useSelector((state) => state.passwordReset);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const newPasswordHandler = async (e) => {\r\n    e.preventDefault();\r\n    dispatch(passwordReset(userEmail));\r\n  }\r\n\r\n  useEffect(() => {\r\n    dispatch({type: USER_PASSWORD_RESET_CLEAR})\r\n  }, [dispatch])\r\n\r\n  if (loading) {\r\n    return <div className=\"beat-loader\"><BeatLoader size={40} color={'#C0C0C0'}/></div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"reset-password-container\">\r\n      <form className=\"reset-password-form\" onSubmit={newPasswordHandler}>\r\n        <label>Enter your registered email:</label>\r\n          <input \r\n            type=\"email\" \r\n            placeholder=\"Please enter email...\"\r\n            required\r\n            value={userEmail} \r\n            onChange={(e) => setUserEmail(e.target.value)}\r\n          ></input>\r\n        <button type=\"submit\">Submit</button>\r\n      </form>\r\n      <div className=\"reset-password-alerts\">\r\n        {message ? <>\r\n          <Alert message={message.message} variant={'success'}></Alert> \r\n          <Link to=\"/login\">Back to login screen...</Link> </>:\r\n          error ? \r\n          <Alert message={error.data.message} variant={'danger'}></Alert> :\r\n        null \r\n          }\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NewPassword\r\n","import React from 'react';\r\n\r\nimport '../styles/Components/SearchBar.scss';\r\n\r\nconst SearchTag = ({searchterm, removeSearchTerm}) => {\r\n\r\n  const removeTagHandler = () => {\r\n    removeSearchTerm(searchterm)\r\n  }\r\n\r\n  return (\r\n    <li className=\"searchTag\">\r\n      <button onClick={removeTagHandler}>\r\n        <i className=\"fas fa-hashtag\"></i>\r\n        <p>{searchterm}</p> \r\n      </button>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default SearchTag\r\n","import React, { useState } from 'react';\r\n\r\nimport SearchTag from './SearchTag';\r\n\r\nimport '../styles/Components/SearchBar.scss';\r\n\r\nconst SearchBar = ({ searchTerms, addSearchTerm, removeSearchTerm }) => {\r\n\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  const addSearchTermHandler = (e) => {\r\n    e.preventDefault();\r\n    addSearchTerm(searchTerm);\r\n    document.querySelector('.search-term-form').reset();\r\n  } \r\n  \r\n  return (\r\n    <div className=\"searchbar-container\" style={{animation: 'fadeIn 1s forwards'}}>\r\n    {searchTerms.length === 0 && <p className=\"searchbar-no-terms\">Please enter a search term...</p>}\r\n    <ul>{searchTerms.map((searchterm, index) => \r\n        <SearchTag \r\n          key={index} \r\n          searchterm={searchterm} \r\n          removeSearchTerm={removeSearchTerm}\r\n        />)}\r\n      </ul>\r\n      <form className=\"search-term-form\" onSubmit={addSearchTermHandler}>\r\n        <i className=\"fas fa-hashtag\"></i>\r\n        <input type=\"text\" onChange={(e)=> setSearchTerm(e.target.value)}></input>\r\n        <button type=\"submit\">Search</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SearchBar\r\n","import React from 'react';\r\n\r\nimport '../styles/Components/ReportTile.scss'\r\n\r\nconst ReportTile = ({report, searchTerms, setViewReport, setReportDetails}) => {\r\n\r\n  const checkTags = () => {\r\n    let flag = true;\r\n    searchTerms.forEach(searchTerm => {\r\n      if (!report.tags.includes(searchTerm)) flag = false;\r\n    })\r\n    return flag;\r\n  }\r\n\r\n  const showReport = () => {\r\n    setReportDetails(report);\r\n    setViewReport(true);\r\n  }\r\n\r\n  //ANY REPORT THAT DOESN'T INCLUDE THE SEARCH TERM RETURNS NULL\r\n  if (!checkTags()) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"report-tile\" style={{animation: 'fadeIn 1s forwards'}}>\r\n      <div className=\"report-tile-title\">\r\n      <h2>{report.title}</h2>\r\n        <ul>\r\n          {report.tags.map((tag, index) => {\r\n            return <li key={index}>#{tag}</li>\r\n          })}\r\n        </ul>\r\n      </div>\r\n      <div className=\"report-tile-content\">\r\n        <p>{report.shortDesc}</p>\r\n        <button onClick={showReport}>More info</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ReportTile\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { fetchCompanyReports } from '../state/actions/reportsActions.js';\r\n\r\nimport { BeatLoader } from 'react-spinners';\r\nimport Switch from 'react-switch';\r\n\r\nimport Alert from '../components/Alert';\r\nimport SearchBar from '../components/SearchBar';\r\nimport ReportTile from '../components/ReportTile';\r\n\r\nimport '../styles/Screens/SearchReports.scss';\r\n\r\nconst SearchReports = ({ history, setViewReport, setReportDetails }) => {\r\n\r\n  //REDIRECT FOR UNAUTH USERS\r\n  const auth = useSelector((state) => state.userLogin.loggedIn);\r\n  !auth && history.push('/login');\r\n\r\n  //GET + DESTRUCTURE STATE\r\n  const user = useSelector((state) => state.userLogin.userInfo);\r\n  const { company, isAdmin } = user;\r\n  const loading = useSelector((state) => state.reports.loading);\r\n  const fetchedReports = useSelector((state) => state.reports);\r\n  const { error, reports } = fetchedReports;\r\n\r\n  //LOCAL STATE\r\n  const [searchTerms, setSearchTerms] = useState([]);\r\n  const [unapprovedReports, setUnapprovedReports] = useState([]);\r\n  const [showUnapproved, setShowUnapproved] = useState(false);\r\n\r\n  //ADD AND REMOVE SEARCH TERMS\r\n  const addSearchTerm = (term) => {\r\n\r\n    if (term.charAt(0) === '#') {\r\n      term = term.slice(1);\r\n    }\r\n\r\n    if (searchTerms.includes(term)) return;\r\n\r\n    setSearchTerms([...searchTerms, term.toLowerCase()]);\r\n  }\r\n\r\n  const removeSearchTerm = (removedTerm) => {\r\n    const copy = [...searchTerms];\r\n    const updatedTerms = copy.filter(searchTerm => searchTerm !== removedTerm);\r\n    setSearchTerms(updatedTerms)\r\n  }\r\n  \r\n  //CALL DB ON LOGIN\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (auth) {\r\n      dispatch(fetchCompanyReports(company));\r\n    }\r\n  }, [company, auth, dispatch]);\r\n\r\n  //POPULATE UNAPPROVED REPORTS\r\n  useEffect(() => {\r\n    if (reports) {\r\n      const filtered = reports.filter(report => report.approved === false);\r\n      setUnapprovedReports(filtered);\r\n    }\r\n  }, [reports])\r\n\r\n  const showApprovedHandler = () => {\r\n    showUnapproved ? \r\n      setShowUnapproved(false):\r\n      setShowUnapproved(true);\r\n  }\r\n\r\n  return (\r\n    <div className=\"searchReports-container\">\r\n    { loading ? \r\n      <div className=\"beat-loader\">\r\n        <BeatLoader size={40} color={'#C0C0C0'}/>\r\n      </div> : \r\n      error ? \r\n        <Alert>{error.message}</Alert> :\r\n      reports ? \r\n        <>\r\n          {isAdmin && <label className=\"search-reports-unapproved-switch\">\r\n            <Switch onChange={showApprovedHandler} checked={showUnapproved} />\r\n            <p>Show Unapproved</p>\r\n          </label>}\r\n\r\n          <SearchBar \r\n            searchTerms={searchTerms}\r\n            addSearchTerm={addSearchTerm}\r\n            removeSearchTerm={removeSearchTerm}  \r\n          />\r\n\r\n          \r\n          \r\n          <div className=\"searchReports-tiles-container\">\r\n            {showUnapproved ? \r\n            unapprovedReports.map((report, index) => (\r\n              <ReportTile\r\n                key={index}\r\n                report={report}\r\n                searchTerms={searchTerms}\r\n                setViewReport={setViewReport}\r\n                setReportDetails={setReportDetails}\r\n              >{report.title}</ReportTile>)) :\r\n            reports.map((report, index) => (\r\n                <ReportTile\r\n                  key={index}\r\n                  report={report}\r\n                  searchTerms={searchTerms}\r\n                  setViewReport={setViewReport}\r\n                  setReportDetails={setReportDetails}\r\n                >{report.title}</ReportTile>))      \r\n            }         \r\n          </div>\r\n        </> : \r\n      null\r\n    }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SearchReports;\r\n","import { getReports } from '../../utils/graphql';\r\n\r\nimport {\r\n  FETCH_REPORTS_REQUEST,\r\n  FETCH_REPORTS_SUCCESS,\r\n  FETCH_REPORTS_FAILURE,\r\n} from '../constants.js';\r\n\r\nexport const fetchCompanyReports = (companyID) => async (dispatch) => {\r\n\r\n  try {\r\n    dispatch({\r\n      type: FETCH_REPORTS_REQUEST\r\n    })\r\n\r\n    const reports = await getReports(companyID);\r\n\r\n    //EXTRACT COMPANY DETAILS FROM RESPONSE \r\n    const { companyReports } = reports;\r\n  \r\n    dispatch({\r\n      type: FETCH_REPORTS_SUCCESS,\r\n      payload: companyReports\r\n    })\r\n\r\n  } catch (err) {\r\n    dispatch({\r\n      type: FETCH_REPORTS_FAILURE,\r\n      payload: err.response\r\n    })\r\n  }\r\n}","import React from 'react'\r\n\r\nconst Checkbox = ({reportTags, setReportTags}) => {\r\n\r\n  const tagHandler = (e) => {\r\n\r\n    const copy = [...reportTags];\r\n\r\n    if (e.target.checked) {\r\n      copy.push(e.target.value);\r\n      setReportTags(copy);\r\n    } else {\r\n      const filtered = copy.filter(tag => tag !== e.target.value);\r\n      setReportTags(filtered);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"checkbox-container\">\r\n        <div className=\"searchtag-container\">\r\n          <label>#electrical</label>\r\n          <input \r\n            type=\"checkbox\" \r\n            className=\"searchtag-checkbox\" \r\n            value=\"electrical\" \r\n            onChange={tagHandler}/>\r\n        </div>\r\n        <div className=\"searchtag-container\">\r\n          <label>#hydraulic</label>\r\n          <input \r\n            type=\"checkbox\" \r\n            className=\"searchtag-checkbox\" \r\n            value=\"hydraulic\" \r\n            onChange={tagHandler}/>\r\n        </div>\r\n        <div className=\"searchtag-container\">\r\n          <label>#kystdesign</label>\r\n          <input \r\n            type=\"checkbox\" \r\n            className=\"searchtag-checkbox\" \r\n            value=\"kystdesign\" \r\n            onChange={tagHandler}/>\r\n        </div>\r\n        <div className=\"searchtag-container\">\r\n          <label>#schilling</label>\r\n          <input \r\n            type=\"checkbox\" \r\n            className=\"searchtag-checkbox\" \r\n            value=\"schilling\" \r\n            onChange={tagHandler}/>\r\n        </div>\r\n        <div className=\"searchtag-container\">\r\n          <label>#manipulator</label>\r\n          <input \r\n            type=\"checkbox\" \r\n            className=\"searchtag-checkbox\" \r\n            value=\"manipulator\" \r\n            onChange={tagHandler}/>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Checkbox\r\n","import React, { useState } from 'react';\r\n\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport { addImage, removeImage } from '../utils/rest';\r\n\r\nimport '../styles/Images.scss';\r\n\r\nconst Images = ({ reportImages, setReportImages }) => {\r\n\r\n  const [fileInputState, setFileInputState] = useState('');\r\n  const [selectedFile, setSelectedFile] = useState('');\r\n\r\n  const company = useSelector((state) => state.company.company.name)\r\n\r\n  const sendImageHandler= (e) => {\r\n    e.preventDefault();\r\n    \r\n    if(!selectedFile) return;\r\n\r\n    //CONVERTS IMAGE TO STRING\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(selectedFile);\r\n\r\n    reader.onloadend = async () => {\r\n     const result = await addImage(reader.result, company);\r\n     console.log('result', result)\r\n     addToImageArray(result);\r\n     setFileInputState('');\r\n     setSelectedFile('');\r\n    }\r\n    reader.onerror = () => {\r\n      console.log('Image upload error')\r\n    }\r\n  }\r\n\r\n  const addImageHandler = async (e) => {\r\n    const file = e.target.files[0];\r\n    setFileInputState(e.target.value);\r\n    setSelectedFile(file);\r\n  }\r\n\r\n  const removeImageHandler = async (e) => {\r\n    e.preventDefault();\r\n    const imageId = e.target.getAttribute('data-publicid');\r\n    const reply = await removeImage(imageId);\r\n    if (reply.result === 'ok') {\r\n      removeFromImageArray(imageId);\r\n    }\r\n  }\r\n\r\n  const addToImageArray = (image) => {\r\n    const copy = [...reportImages];\r\n    copy.push(image);\r\n    setReportImages(copy);\r\n  }\r\n\r\n  const removeFromImageArray = (imageId) => {\r\n    const copy = [...reportImages];\r\n    const filtered = copy.filter(image => image.publicId !== imageId);\r\n    setReportImages(filtered);\r\n  }\r\n\r\n  return (\r\n    <div className=\"images-container\">\r\n      <label>Images</label>\r\n      <p className=\"report-helper\">Any supporting images.</p>\r\n      <p className=\"report-helper\">Click an image to delete it.</p>\r\n      <hr/>\r\n      <div>\r\n        {reportImages.length === 0 ? \r\n        <p className=\"no-images-text\">No images yet...</p> : \r\n        <ul className=\"images-uploaded\">\r\n          {reportImages.map(image => {\r\n            return <li key={image.assetId}><img \r\n              className=\"image-thumbnail\"\r\n              data-publicid={image.publicId} \r\n              src={image.imageUrl} \r\n              alt={image.assetId}\r\n              onClick={removeImageHandler}  \r\n              /></li>\r\n          })}\r\n        </ul>\r\n        }\r\n        <div className=\"pic-upload-container\">\r\n          <input \r\n            type=\"file\" \r\n            className=\"pic-upload-input\"\r\n            value={fileInputState}\r\n            onChange={(e) => addImageHandler(e)}></input>\r\n          <button onClick={sendImageHandler}>Add Image</button>\r\n        </div>\r\n      </div>  \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Images\r\n","import React, { useState } from 'react';\r\n\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport { submitReport } from '../utils/rest';\r\n\r\nimport Checkbox from '../components/Checkbox';\r\nimport Images from '../components/Images';\r\nimport Alert from '../components/Alert';\r\n\r\nimport { BeatLoader } from 'react-spinners';\r\n\r\nimport '../styles/NewReport.scss';\r\n\r\nconst NewReport = ({ history }) => {\r\n\r\n  const auth = useSelector((state) => state.userLogin.loggedIn);\r\n  !auth && history.push('/login');\r\n\r\n  const user = useSelector((state) => state.userLogin.userInfo._id)\r\n  const company = useSelector((state) =>state.userLogin.userInfo.company)\r\n\r\n  //FORM INPUT STATE\r\n  const [reportTitle, setReportTitle] = useState('');\r\n  const [reportTags, setReportTags] = useState([]);\r\n  const [reportShortDesc, setReportShortDesc] = useState('');\r\n  const [reportLongDesc, setReportLongDesc] = useState('');\r\n  const [reportSteps, setReportSteps] = useState([]);\r\n  const [reportImages, setReportImages] = useState([]);\r\n\r\n  const [customTag, setCustomTag] = useState('');\r\n  const [newStep, setNewStep] = useState('');\r\n\r\n  //FORM SUBMISSION STATE\r\n  const [formSubmitted, setFormSubmitted] = useState(false);\r\n  const [submitSuccess, setSubmitSuccess] = useState(false);\r\n  const [submitError, setSubmitError] = useState(false);\r\n\r\n  const formSubmitHandler = async (e) => {\r\n    e.preventDefault();\r\n\r\n    setFormSubmitted(true);\r\n\r\n    const newReport = {\r\n      title: reportTitle,\r\n      user: user,\r\n      company: company,\r\n      tags: reportTags,\r\n      shortDesc: reportShortDesc,\r\n      longDesc: reportLongDesc,\r\n      steps: reportSteps,\r\n      images: reportImages\r\n    }\r\n\r\n    const reply = await submitReport(newReport);\r\n\r\n    setFormSubmitted(false);\r\n\r\n    if (reply.status === 201) {\r\n      setSubmitSuccess(true)\r\n    } else {\r\n      setSubmitError(true)\r\n    }\r\n  }\r\n\r\n  const addCustomTagHandler = (e) => {\r\n    e.preventDefault();\r\n    const copy = [...reportTags];\r\n    copy.push(customTag);\r\n    setReportTags(copy);\r\n    setCustomTag('');\r\n  }\r\n\r\n  const removeCustomTagHandler = (e) => {\r\n    e.preventDefault();\r\n    const copy = [...reportTags];\r\n    //REMOVE # VIA SLICE\r\n    const tagText = e.target.innerText.slice(1);\r\n    //UPDATE REPORT TAG STATE\r\n    const filtered = copy.filter(tag => tag !== tagText); \r\n    setReportTags(filtered);\r\n    //CHECK IF CHECKBOX NEEDS UNSELECTING\r\n    const checkboxNodes = document.querySelectorAll('.searchtag-checkbox');\r\n    const checkboxArray = Array.from(checkboxNodes);\r\n    checkboxArray.forEach(checkbox => {\r\n      if (tagText === checkbox.value) {\r\n        checkbox.checked = false;\r\n      }\r\n    })\r\n  }\r\n\r\n  const addStepHandler = (e) => {\r\n    e.preventDefault();\r\n    const copy = [...reportSteps];\r\n    copy.push(newStep);\r\n    setReportSteps(copy);\r\n    setNewStep(''); \r\n  }\r\n\r\n  const removeStepHandler = (e) => {\r\n    e.preventDefault();\r\n    const copy = [...reportSteps];\r\n    const removeIndex = e.target.innerText.split(':')[0] - 1;\r\n    copy.splice(removeIndex, 1)\r\n    setReportSteps(copy); \r\n  }\r\n\r\n  if (formSubmitted) {\r\n    return <div className=\"beat-loader\">\r\n        <BeatLoader size={40} color={'#C0C0C0'}/>\r\n      </div>\r\n  }\r\n\r\n  if (submitSuccess) {\r\n    return <Alert\r\n        message={'Form submitted!'}\r\n        variant={'success'}\r\n      ></Alert>\r\n  }\r\n\r\n  if (submitError) {\r\n    return <Alert\r\n      message={'Form submission error...'}\r\n      variant={'danger'}\r\n    ></Alert>\r\n  }\r\n\r\n  return (\r\n    <div className=\"new-report-container\">\r\n      \r\n      <form className=\"new-report-form\" onSubmit={(e) => formSubmitHandler(e)}>\r\n\r\n        <label>Report Title</label>\r\n        <hr/>\r\n        <input \r\n          required\r\n          className=\"new-report-title\" \r\n          type=\"text\" \r\n          placeholder=\"Please enter a report title...\"\r\n          value={reportTitle} \r\n          onChange={(e) => setReportTitle(e.target.value)}></input>\r\n\r\n        <label>Search Tags</label>\r\n        <p className=\"report-helper\">Any search terms that will help to find the report in future</p>\r\n        <p className=\"report-helper\">Click a tag to delete it.</p>\r\n        <hr/>\r\n        <Checkbox \r\n          reportTags={reportTags}\r\n          setReportTags={setReportTags}\r\n        />\r\n        <ul className=\"new-report-tags-ul\">{\r\n          reportTags.length > 0 ? \r\n          reportTags.map((tag, index) => {\r\n            return <li key={index} onClick={(e) => removeCustomTagHandler(e)}>#{tag}</li> \r\n          }) : <p>No tags yet...</p>\r\n        }</ul>\r\n\r\n        <input \r\n          type=\"text\" \r\n          placeholder=\"Please enter a custom tag..\"\r\n          value={customTag} \r\n          onChange={(e) => setCustomTag(e.target.value)}\r\n        ></input>\r\n\r\n        <button \r\n          onClick={(e) => addCustomTagHandler(e)}\r\n        >Add Custom Tag</button>                                            \r\n\r\n        <label>Report Summary</label>\r\n        <p className=\"report-helper\">A short, descriptive summary of the issue</p>\r\n        <hr/>  \r\n        <textarea \r\n          required\r\n          className=\"new-report-shortDesc\"\r\n          placeholder=\"Please enter a short description...\"\r\n          value={reportShortDesc} \r\n          onChange={(e) => setReportShortDesc(e.target.value)}\r\n        ></textarea> \r\n\r\n        <label>Description</label>\r\n        <p className=\"report-helper\">A detailed description of the issue, and how it was resolved</p>\r\n        <hr/>\r\n        <textarea \r\n          required\r\n          className=\"new-report-longDesc\"\r\n          placeholder=\"Please enter a detailed description...\"\r\n          value={reportLongDesc} \r\n          onChange={(e) => setReportLongDesc(e.target.value)} \r\n        ></textarea>   \r\n\r\n        <label>Steps</label>\r\n        <p className=\"report-helper\">A step by step guide to resolving the issue, if appropriate.</p>\r\n        <p className=\"report-helper\">Click a step to delete it.</p>\r\n        <hr/>\r\n        <ul className=\"new-report-steps-ul\">\r\n          {reportSteps.length > 0 ? \r\n          reportSteps.map((step, index) => {\r\n            return <li key={index} onClick={(e) => removeStepHandler(e)}>{index + 1}: {step}</li>}) :\r\n            <p>No steps yet...</p>} \r\n        </ul> \r\n\r\n        <input type=\"text\" \r\n          onChange={(e) => setNewStep(e.target.value)} \r\n          value={newStep}\r\n        ></input>\r\n        <button onClick={(e) => addStepHandler(e)}>Add Step</button>\r\n\r\n        <Images\r\n          reportImages={reportImages} \r\n          setReportImages={setReportImages}\r\n        ></Images>\r\n\r\n        <button type=\"submit\">Submit Report</button>      \r\n        \r\n      </form>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NewReport\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\r\nimport { BeatLoader } from 'react-spinners';\r\nimport Switch from 'react-switch';\r\n\r\nimport { editReport, deleteReport } from '../utils/rest';\r\n\r\nimport Images from '../components/Images';\r\nimport ReportComment from '../components/ReportComment';\r\nimport Alert from '../components/Alert';\r\n\r\nimport '../styles/EditReport.scss';\r\n\r\nconst EditReport = ({ history, reportDetails, setReportDetails }) => {\r\n\r\n  //CHECK FOR AUTH USER\r\n  const auth = useSelector((state) => state.userLogin.loggedIn);\r\n  !auth && history.push('/login');\r\n\r\n  const loggedInUser = useSelector((state) => state.userLogin.userInfo);\r\n\r\n  //EXTRACT VALUES FROM REPORT TO EDIT\r\n  const { id, title, user, tags, shortDesc, longDesc, steps, images, comments, approved, approvedBy } = reportDetails;\r\n\r\n  //PREPOPULATE FORM\r\n  const [editTitle, setEditTitle] = useState(title);\r\n  const [editTags, setEditTags] = useState(tags);\r\n  const [editShortDesc, setEditShortDesc] = useState(shortDesc);\r\n  const [editLongDesc, setEditLongDesc] = useState(longDesc);\r\n  const [editSteps, setEditSteps] = useState(steps);\r\n  const [editImages, setEditImages] = useState(images);\r\n  const [editComments, setEditComments] = useState(comments);\r\n\r\n  //FORM LOGIC\r\n  const [newTag, setNewTag] = useState('');\r\n  const [newStep, setNewStep] = useState('');\r\n\r\n  //FORM APPROVAL STATE\r\n  const [reportApproved, setReportApproved] = useState(approved);\r\n  const [reportApprovedUser, setReportApprovedUser] = useState(approvedBy);\r\n\r\n  //SUBMISSION STATE\r\n  const [submitted, setSubmitted] = useState(false);\r\n  const [submitSuccess, setSubmitSuccess] = useState(false);\r\n  const [submitError, setSubmitError] = useState(false);\r\n\r\n  //DELETED STATE\r\n  const [showConfirmDelete, setShowConfirmDelete] = useState(false);\r\n  // eslint-disable-next-line\r\n  const [reportDeleted, setReportDeleted] = useState(false);\r\n\r\n  useEffect(() => {         //???\r\n  }, [newTag]);\r\n\r\n  //FORM SUBMISSION HANDLER\r\n  const submitEditHandler = async (e) => {\r\n    e.preventDefault();\r\n    const editedReport = {\r\n      id: id,\r\n      title: editTitle,\r\n      tags: editTags,\r\n      shortDesc: editShortDesc,\r\n      longDesc: editLongDesc,\r\n      steps: editSteps,\r\n      images: editImages,\r\n      comments: editComments,\r\n      approved: reportApproved,\r\n      approvedBy: reportApprovedUser,\r\n    }\r\n\r\n    setSubmitted(true);\r\n    const reply = await editReport(editedReport);\r\n    setSubmitted(false);\r\n\r\n    if (reply.status === 200) {\r\n      setSubmitSuccess(true);\r\n    } else {\r\n      setSubmitError(true);\r\n    }\r\n  }\r\n\r\n  //SEARCH TAG HANDLERS\r\n  const removeTagHandler = (e) => {\r\n    e.preventDefault();\r\n    const removedTag = e.target.parentElement.innerText.slice(2,-2);\r\n    const copy = [...editTags];\r\n    const filtered = copy.filter(tag => tag !== removedTag);\r\n    setEditTags(filtered);\r\n  }\r\n\r\n  const addTagHandler = (e) => {\r\n    e.preventDefault();\r\n    const copy = [...editTags];\r\n    copy.push(newTag);\r\n    setEditTags(copy);\r\n    setNewTag('');\r\n  }\r\n\r\n  //STEP HANDLERS\r\n  const removeStepHandler = (e) => {\r\n    e.preventDefault();\r\n    const indexToRemove = e.target.parentElement.innerText.split(':')[0] - 1;\r\n    const copy = [...editSteps];\r\n    copy.splice(indexToRemove, 1);\r\n    setEditSteps(copy);\r\n  }\r\n\r\n  const addStepHandler = (e) => {\r\n    e.preventDefault();\r\n    const copy = [...editSteps];\r\n    copy.push(newStep);\r\n    setEditSteps(copy);\r\n    setNewStep('');\r\n  }\r\n\r\n  //HANDLER TO REORDER STEPS ARRAY VIA DRAG + DROP\r\n  const handleOnDragEnd = (result) => {\r\n    if(!result.destination) return;\r\n    const copy = [...editSteps];\r\n    const [newOrder] = copy.splice(result.source.index, 1);\r\n    copy.splice(result.destination.index, 0, newOrder);\r\n    setEditSteps(copy);\r\n  }\r\n\r\n  //COMMENT HANDLERS\r\n  const removeCommentHandler = (e, commentId) => {\r\n    e.preventDefault();\r\n    const copy = [...editComments];\r\n    const filtered = copy.filter(comment => comment.id !== commentId);\r\n    setEditComments(filtered);\r\n  }\r\n\r\n  //APPROVAL HANDLER\r\n  const approvedHandler = () => {\r\n    //UNAPPROVE\r\n    if (reportApproved) {\r\n      setReportApproved(false);\r\n      setReportApprovedUser(null);\r\n    } else {\r\n    //APPROVE AS LOGGED IN USER  \r\n      setReportApproved(true);\r\n      setReportApprovedUser(loggedInUser);\r\n    }\r\n  }\r\n\r\n  //DELETE REPORT HANDLER\r\n const setShowConfirmDeleteHandler = (e) => {\r\n  e.preventDefault();\r\n  setShowConfirmDelete(!showConfirmDelete);\r\n }\r\n\r\n const reportDeleteHandler = async (e) => {\r\n  e.preventDefault();\r\n  const reply = await deleteReport(id, images);\r\n  console.log(reply);\r\n  //setReportDeleted(true);\r\n }\r\n\r\n  if (submitted) {\r\n    return  <div className=\"beat-loader\">\r\n            <BeatLoader size={40} color={'#C0C0C0'}/>\r\n            </div>\r\n  }\r\n\r\n  if (submitSuccess) {\r\n    return  <div>\r\n              <Alert\r\n              message={'Form edit submitted!'}\r\n              variant={'success'}\r\n              ></Alert> \r\n              <Link to=\"/search\">\r\n                <button>Back to search</button>\r\n              </Link>\r\n            </div>\r\n  }\r\n\r\n  if (submitError) {\r\n    return  <Alert\r\n            message={'Form submission error!'}\r\n            variant={'danger'}\r\n            ></Alert> \r\n  }\r\n\r\n  if (reportDeleted) {\r\n    return <>\r\n      <p>Report deleted</p>\r\n      <Link to=\"/search\">\r\n        <button>Back to search</button>\r\n      </Link>\r\n    </>\r\n  }\r\n\r\n  if (showConfirmDelete) {\r\n    return <>\r\n      <p>Are you sure you want to delete {title}?</p>\r\n      <button onClick={setShowConfirmDeleteHandler}>BACK</button>\r\n      <button onClick={reportDeleteHandler}>CONFIRM</button>\r\n    </>\r\n  }\r\n\r\n  return (\r\n    <div className=\"edit-report-container\">\r\n\r\n      <form className=\"edit-report-form\" onSubmit={submitEditHandler}>\r\n\r\n        <label>Title</label>\r\n        <input \r\n          required\r\n          className=\"edit-report-title\" \r\n          type=\"text\" value={editTitle} \r\n          onChange={(e) => setEditTitle(e.target.value)}\r\n         ></input>\r\n\r\n        <label>Author</label>\r\n        <p>{user && user.name}</p>\r\n\r\n        <label>Contact</label>\r\n        <p>{user && user.email}</p>\r\n\r\n        <label>SearchTags</label>\r\n        <ul className=\"edit-report-searchtags\">\r\n          {editTags && editTags.map((tag, index) => {\r\n            return <li key={index}># {tag} <button onClick={removeTagHandler}>X</button></li>\r\n          })}\r\n        </ul>\r\n        <input \r\n          type=\"text\" \r\n          value={newTag} \r\n          onChange={(e) => {setNewTag(e.target.value)}}\r\n        ></input>\r\n        <button onClick={addTagHandler}>Add Tag</button>\r\n\r\n        <label>Short Description</label>\r\n        <textarea \r\n          required\r\n          value={editShortDesc} \r\n          onChange={(e) => setEditShortDesc(e.target.value)}\r\n         ></textarea>\r\n\r\n        <label>Long Description</label>\r\n        <textarea \r\n          required\r\n          value={editLongDesc} \r\n          onChange={(e) => setEditLongDesc(e.target.value)}\r\n        ></textarea>\r\n\r\n        <label>Steps</label>\r\n        <DragDropContext onDragEnd={handleOnDragEnd}>\r\n          <Droppable droppableId=\"edit-report-steps\">\r\n            {(provided) => (\r\n              <ul className=\"report-steps-ul\" {...provided.droppableProps} ref={provided.innerRef}>\r\n                {editSteps.map((step, index) => {\r\n                  return (\r\n                    <Draggable key={step} draggableId={step} index={index}>\r\n                      {(provided) => (\r\n                        <li {...provided.draggableProps} \r\n                            {...provided.dragHandleProps} \r\n                            ref={provided.innerRef}\r\n                            >{index + 1}: {step} \r\n                            <button onClick={removeStepHandler}>X</button>\r\n                        </li>)}\r\n                    </Draggable>);\r\n                })}\r\n                {provided.placeholder}\r\n              </ul>)}\r\n          </Droppable>\r\n        </DragDropContext>\r\n\r\n        <input \r\n          type=\"text\" \r\n          value={newStep} \r\n          onChange={(e) => {setNewStep(e.target.value)}}\r\n        ></input>\r\n        <button onClick={addStepHandler}>Add Step</button>\r\n\r\n        <Images\r\n          reportImages={editImages}\r\n          setReportImages={setEditImages}\r\n        />\r\n\r\n        <label>\r\n          <span>Report Approved:</span>\r\n          <Switch onChange={approvedHandler} checked={reportApproved} />\r\n          <span>{reportApprovedUser && <p>{reportApprovedUser.name}</p>}</span>\r\n        </label>\r\n\r\n        <button type=\"submit\">SUBMIT</button>\r\n\r\n        <button onClick={setShowConfirmDeleteHandler}>DELETE</button>\r\n\r\n        <label>Comments</label>\r\n        <ul className=\"edit-report-comments\">\r\n          {editComments.map((comment, index) => {\r\n            return <li key={index}>\r\n            <ReportComment comment={comment}></ReportComment>\r\n            <button onClick={(e) => removeCommentHandler(e, comment.id)}>X</button></li>\r\n          })}\r\n        </ul>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default EditReport\r\n","import React from 'react'\r\n\r\nconst UserTile = ({user, checkboxHandler}) => {\r\n\r\n  const { id, name, email, isAdmin } = user;\r\n  return (\r\n    <div>\r\n     {name}\r\n     {email}\r\n     {isAdmin ? <p>Admin</p> : <p>User</p>}\r\n     <input type=\"checkbox\" className=\"delete-user-checkbox\" onChange={(e) => checkboxHandler(e, id)}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default UserTile\r\n","import React, { useEffect, useState, useReducer } from 'react';\r\n\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { fetchCompanyUsers } from '../state/actions/companyActions';\r\n\r\nimport { BeatLoader } from 'react-spinners';\r\n\r\nimport { addUser as addUserRest, deleteUsers as deleteUsersRest } from '../utils/rest.js';\r\n\r\nimport UserTile from '../components/UserTile.js';\r\nimport Alert from '../components/Alert.js';\r\n\r\nconst Company = ({ history }) => {\r\n\r\n  const auth = useSelector((state) => state.userLogin.loggedIn);\r\n  !auth && history.push('/login');\r\n\r\n  const initialState = {\r\n    username: '',\r\n    userEmail: '',\r\n    userAdmin: false,\r\n    submitLoading: false,\r\n    submitMessage: '',\r\n    submitError: '',\r\n    deleteLoading: false,\r\n    deleteMessage: '',\r\n    deleteError: '',\r\n  }\r\n\r\n  const pageReducer = (state, action) => {\r\n    switch (action.type) {\r\n      case 'USER_NAME' : \r\n        return {...state, submitMessage: '', submitError: '', deleteMessage: '', deleteError: '', username: action.value}\r\n      case 'USER_EMAIL' :\r\n        return {...state, submitMessage: '', submitError: '', deleteMessage: '', deleteError: '', userEmail: action.value}\r\n      case 'USER_ADMIN' :\r\n        return {...state, submitMessage: '', submitError: '', deleteMessage: '', deleteError: '', userAdmin: action.value}\r\n      case 'SUBMIT_USER_REQUEST' :\r\n        return {...state, submitLoading: true}\r\n      case 'SUBMIT_USER_SUCCESS' : \r\n        return {...state, submitLoading: false, submitMessage: action.value, username: '', userEmail: '', userAdmin: false}\r\n      case 'SUBMIT_USER_FAILURE' : \r\n        return {...state, submitLoading: false, submitError: action.value}\r\n      case 'DELETE_USER_REQUEST' :\r\n        return {...state, deleteLoading: true}\r\n      case 'DELETE_USER_SUCCESS' : \r\n        return {...state, deleteLoading: false, deleteMessage: action.value}\r\n      case 'DELETE_USER_FAILURE' : \r\n        return {...state, deleteLoading: false, deleteError: action.value}\r\n      case 'CLEAR_MESSAGES' : \r\n        return {...state, submitMessage: '', submitError: '', deleteMessage: '', deleteError: ''}\r\n      default:\r\n        return state;\r\n    } \r\n  }\r\n\r\n  //NOTE YOU HAVE TO DIFFERENTIATE BETWEEN LOCAL AND GLOBAL REDUCER FOR DISPATCH TO WORK\r\n  const [pageState, dispatchReducer] = useReducer(pageReducer, initialState);\r\n  const dispatchRedux = useDispatch();\r\n\r\n  const company = useSelector((state) => state.userLogin.userInfo.company)\r\n  const { users, loading } = useSelector((state) => state.companyUsers);\r\n\r\n  //ARRAY TO HOLD USERS TO DELETE\r\n  const [deleteUsers, setDeleteUsers] = useState([]);\r\n\r\n  useEffect(()=> {\r\n    dispatchRedux(fetchCompanyUsers());\r\n  }, [dispatchRedux, pageState.submitLoading, pageState.deleteLoading])\r\n\r\n  const newUserHandler = async (e) => {\r\n    e.preventDefault();\r\n    dispatchReducer({type: 'SUBMIT_USER_REQUEST'})\r\n    const { username, userEmail, userAdmin } = pageState;\r\n    const reply = await addUserRest(username, userEmail, userAdmin, company);\r\n    if (reply.status === 201) {\r\n      dispatchReducer({type: 'SUBMIT_USER_SUCCESS', value: reply.data.message})\r\n    } else {\r\n      dispatchReducer({type: 'SUBMIT_USER_FAILURE', value: reply.data.message})\r\n    }\r\n  }\r\n\r\n  const deleteUsersHandler = async () => {\r\n    if (deleteUsers.length > 0) {\r\n      dispatchReducer({type: 'CLEAR_MESSAGES'})\r\n      dispatchReducer({type: 'DELETE_USER_REQUEST'})\r\n      const reply = await deleteUsersRest(deleteUsers);\r\n      if (reply.status === 200) {\r\n        dispatchReducer({type: 'DELETE_USER_SUCCESS', value: reply.data.message})\r\n        setDeleteUsers([]);\r\n      } else {\r\n        dispatchReducer({type: 'DELETE_USER_FAILURE', value: reply.data.message})\r\n      }\r\n    }\r\n  }\r\n\r\n  const adminToggleHandler = () => {\r\n    pageState.userAdmin \r\n    ? dispatchReducer({type: 'USER_ADMIN', value: false}) \r\n    : dispatchReducer({type: 'USER_ADMIN', value: true}) \r\n  }\r\n\r\n  const checkboxHandler = (e, id) => {\r\n\r\n    const copy = [...deleteUsers];\r\n\r\n    if (e.target.checked) {\r\n      copy.push(id);\r\n      setDeleteUsers(copy);\r\n    } else {\r\n      const filter = copy.filter(user => user !== id);\r\n      setDeleteUsers(filter);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"company-container\">\r\n\r\n      <div className=\"company-add-user\"> \r\n      {pageState.submitLoading ? \r\n        <p>Uploading user...</p> :\r\n        <form className=\"add-company-user\" onSubmit={(e) => newUserHandler(e)}>\r\n          <label>New User Name</label>\r\n          <input type=\"text\" \r\n                 value={pageState.username} \r\n                 onChange={(e) => dispatchReducer({type: 'USER_NAME', value: e.target.value})} \r\n                 required></input>\r\n          <label>New User Email</label>\r\n          <input type=\"email\" \r\n                 value={pageState.userEmail} \r\n                 onChange={(e) => dispatchReducer({type: 'USER_EMAIL', value: e.target.value})} \r\n                 required></input>\r\n          <label>Admin</label>\r\n          <input type=\"checkbox\" \r\n                 checked={pageState.userAdmin}\r\n                 onChange={() => adminToggleHandler()}/>\r\n          <button type=\"submit\">Add User</button>\r\n        </form>\r\n        }\r\n      </div>\r\n\r\n      <div className=\"company-add-user-alerts\">\r\n        { pageState.submitMessage ? \r\n          <Alert \r\n            message={pageState.submitMessage} \r\n            variant={'success'} \r\n          ></Alert> :\r\n          pageState.submitError ? \r\n          <Alert \r\n            message={pageState.submitError} \r\n            variant={'danger'} \r\n          ></Alert> :\r\n          null \r\n          }\r\n      </div>\r\n\r\n      <div className=\"company-users\">\r\n        {loading ? \r\n         <div className=\"beat-loader\"> \r\n            <BeatLoader size={40} color={'#C0C0C0'}/>\r\n         </div> :\r\n         users ? \r\n            users.map(user => <UserTile key={user.id} user={user} checkboxHandler={checkboxHandler}/>) :\r\n        <p>No users...</p>\r\n        }\r\n\r\n        <div className=\"company-delete-user-alerts\">\r\n          {pageState.deleteMessage ? \r\n            <Alert message={pageState.deleteMessage} variant={'success'}></Alert> :\r\n            pageState.deleteError ? \r\n            <Alert message={pageState.deleteError} variant={'danger'}></Alert> :\r\n           null \r\n            }\r\n        </div>\r\n        <button onClick={deleteUsersHandler}>Delete selected users</button>\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Company\r\n","import React from 'react';\r\n\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst AddCompany = ({ history }) => {\r\n\r\n  const auth = useSelector((state) => state.userLogin.loggedIn);\r\n  !auth && history.push('/login');\r\n\r\n  return (\r\n    <div>\r\n      Add Company\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AddCompany;\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { passwordChange } from '../state/actions/userActions';\r\nimport { USER_PASSWORD_CHANGE_CLEAR } from '../state/constants';\r\n\r\nimport { BeatLoader } from 'react-spinners';\r\n\r\nimport Alert from '../components/Alert';\r\n\r\nimport '../styles/MyProfile.scss';\r\n\r\nconst Profile = ({ history }) => {\r\n\r\n  const auth = useSelector((state) => state.userLogin.loggedIn);\r\n  !auth && history.push('/login');\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const user = useSelector((state) => state.userLogin.userInfo._id);\r\n  const passwordChangeState = useSelector((state) => state.passwordChange);\r\n  const { loading, message, error } = passwordChangeState;\r\n\r\n  //FORM STATE\r\n  const [currentPassword, setCurrentPassword] = useState('');\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [confirmNewPassword, setConfirmNewPassword] = useState('');\r\n\r\n  const [passwordMismatch, setPasswordMismatch] = useState(false);\r\n\r\n  //CLEAR PASSWORD ALERTS ON PAGE LOAD\r\n  useEffect(() => {\r\n    dispatch({type: USER_PASSWORD_CHANGE_CLEAR})\r\n  }, [dispatch])\r\n\r\n  //CHECK PW ARE DIFFERENT\r\n  const changePasswordHandler = async (e) => {\r\n    e.preventDefault();\r\n    if (newPassword !== confirmNewPassword) {\r\n      setPasswordMismatch(true);\r\n      return;\r\n    }\r\n    setPasswordMismatch(false);\r\n    dispatch(passwordChange(user, currentPassword, newPassword));\r\n  }\r\n\r\n  if (loading) {\r\n    return <div className=\"beat-loader\">\r\n    <BeatLoader size={40} color={'#C0C0C0'}/>\r\n    </div>\r\n  }\r\n  \r\n  return (\r\n    <div className=\"myprofile-container\">\r\n      <h2>Change Password</h2>\r\n      <form onSubmit={changePasswordHandler}>\r\n        <label>Current password</label>\r\n        <input value={currentPassword} onChange={e => setCurrentPassword(e.target.value)} type=\"password\" required></input>\r\n        <label>New password</label>\r\n        <input value={newPassword} onChange={e => setNewPassword(e.target.value)} type=\"password\" required></input>\r\n        <label>Confirm new password</label>\r\n        <input value={confirmNewPassword} onChange={e => setConfirmNewPassword(e.target.value)} type=\"password\" required></input>\r\n        <button type=\"submit\">Change password</button>\r\n      </form>\r\n\r\n      {passwordMismatch && \r\n        <Alert \r\n          message={'New passwords don\\'t match!'} \r\n          variant={'danger'}\r\n        ></Alert>}\r\n\r\n      {message && \r\n        <Alert \r\n          message={'Password updated!'} \r\n          variant={'success'}\r\n        ></Alert>}  \r\n\r\n      {error && \r\n        <Alert \r\n          message={'Password update error!'} \r\n          variant={'danger'}\r\n        ></Alert>} \r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Profile\r\n","import React, { useState } from 'react';\nimport { BrowserRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\n\nimport { useDispatch } from 'react-redux';\nimport { logout as logoutAction } from './state/actions/userActions';\n\nimport './styles/App.css';\n\nimport Navbar from './components/NavBar';\nimport Backdrop from './components/Backdrop';\n\nimport Login from './screens/Login';\nimport NewPassword from './screens/NewPassword'\nimport SearchReports from './screens/SearchReports';\nimport NewReport from './screens/NewReport';\nimport EditReport from './screens/EditReport';\nimport Company from './screens/Company';\nimport AddCompany from './screens/AddCompany';\nimport Profile from './screens/Profile';\n\nconst App = () => {\n\n  //APP STATE\n  const [mode, setMode] = useState('light');\n\n  const [drawer, setDrawer] = useState(false);\n\n  const [viewReport, setViewReport] = useState(false);  //VIEW REPORT MODAL\n  const [reportDetails, setReportDetails] = useState({});  //REPORT DETAILS FOR MODAL / EDIT\n\n  const dispatch = useDispatch();\n\n  //TOGGLE LIGHT/DARK MODE\n  const toggleMode = () => {\n    if (mode === 'light') {\n      trans();\n      setMode('dark');\n      document.documentElement.setAttribute('data-theme', 'dark');\n    } else {\n      trans();\n      setMode('light');\n      document.documentElement.setAttribute('data-theme', 'light');\n    }\n  }\n\n  //TRANSITION ON MODE CHANGE\n  const trans = () => {\n    document.documentElement.classList.add('transition');\n    window.setTimeout(() => {\n    document.documentElement.classList.remove('transition')}, 500);\n  };\n\n  //TOGGLE SIDE DRAWER\n  const toggleDrawer = () => setDrawer(!drawer);\n\n  //LOGOUT\n  const logout = () => {\n    dispatch(logoutAction());\n  }\n\n  return (\n    <Router>\n      <div className=\"App\">\n        {drawer && <Backdrop \n          toggleDrawer={toggleDrawer} \n          logout={logout} \n          drawer={drawer}/> \n        }\n        {viewReport && <Backdrop \n          setViewReport={setViewReport} \n          reportDetails={reportDetails} \n          setReportDetails={setReportDetails}/>\n        }\n        <Navbar \n          mode={mode}\n          toggleMode={toggleMode}\n          toggleDrawer={toggleDrawer}\n          logout={logout}\n          ></Navbar>\n        <Switch>\n          <Route path=\"/\" exact component={Login}></Route>\n          <Route path=\"/newpassword\" exact component={NewPassword}></Route>\n          <Route path=\"/search\" \n                 render={props => <SearchReports {...props} \n                 setViewReport={setViewReport} \n                 setReportDetails={setReportDetails}/>}></Route>\n          <Route path=\"/newreport\" exact component={NewReport}></Route>\n          <Route path=\"/editreport\" \n                 render={props => <EditReport {...props}\n                 reportDetails={reportDetails} \n                 setReportDetails={setReportDetails}\n                 />}></Route>\n          <Route path=\"/company\" exact component={Company}></Route>\n          <Route path=\"/addcompany\" exact component={AddCompany}></Route>\n          <Route path=\"/profile\" exact component={Profile}></Route>\n          <Redirect to=\"/\"/>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport { Provider } from 'react-redux';\nimport store from './state/store.js';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}