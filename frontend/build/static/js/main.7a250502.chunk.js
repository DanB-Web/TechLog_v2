(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{113:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(21),c=n.n(a),s=n(5),o=n(4),i=n(8),u=n(12),l=n(6),j=n(3),d=n.n(j),p=n(7),b=n(20),O=n.n(b),h=n(18),m=n(48),f="https://techlog-server-y7u7n.ondigitalocean.app",x="USER_LOGIN_REQUEST",g="USER_LOGIN_SUCCESS",v="USER_LOGIN_FAIL",y="USER_LOGOUT",S="USER_PASSWORD_CHANGE_REQUEST",E="USER_PASSWORD_CHANGE_SUCCESS",C="USER_PASSWORD_CHANGE_FAILURE",w="USER_PASSWORD_CHANGE_CLEAR",N="USER_PASSWORD_RESET_REQUEST",R="USER_PASSWORD_RESET_SUCCESS",k="USER_PASSWORD_RESET_FAILURE",I="USER_PASSWORD_CHANGE_CLEAR",A="FETCH_REPORTS_REQUEST",D="FETCH_REPORTS_SUCCESS",T="FETCH_REPORTS_FAILURE",_="CLEAR_REPORTS_STATE",U="FETCH_COMPANY_REQUEST",L="FETCH_COMPANY_SUCCESS",M="FETCH_COMPANY_FAILURE",P="CLEAR_COMPANY_STATE",B="FETCH_COMPANY_USER_REQUEST",F="FETCH_COMPANY_USER_SUCCESS",q="FETCH_COMPANY_USER_FAILURE",H="CLEAR_COMPANY_USER_STATE",z=n(49),G=Object(h.combineReducers)({userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case g:return{loading:!1,userInfo:t.payload,loggedIn:!0};case v:return Object(s.a)(Object(s.a)({},e),{},{loading:!1,error:t.payload});case y:return{userInfo:{},isAdmin:!1,isDan:!1,loggedIn:!1};default:return e}},passwordChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return{loading:!0};case E:return{loading:!1,message:t.payload};case C:return{loading:!1,error:t.payload};case w:return{};default:return e}},passwordReset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return{loading:!0};case R:return{loading:!1,message:t.payload};case k:return{loading:!1,error:t.payload};case I:return{};default:return e}},company:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(s.a)({},e);case L:return{company:t.payload};case M:return Object(s.a)(Object(s.a)({},e),{},{error:t.payload});case P:return Object(s.a)(Object(s.a)({},e),{},{company:{}});default:return e}},companyUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case F:return{loading:!1,users:t.payload};case q:return{loading:!1,error:t.payload};case H:return{users:[]};default:return e}},reports:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(s.a)(Object(s.a)({},e),{},{loading:!0});case D:return{loading:!1,reports:t.payload};case T:return Object(s.a)(Object(s.a)({},e),{},{loading:!1,error:t.payload});case _:return Object(s.a)(Object(s.a)({},e),{},{reports:[]});default:return e}}}),$={userLogin:localStorage.getItem("userInfo")?{userInfo:JSON.parse(localStorage.getItem("userInfo")),loggedIn:!0}:{userInfo:{isAdmin:!1,isDan:!1},loggedIn:!1},company:localStorage.getItem("companyInfo")?{company:JSON.parse(localStorage.getItem("companyInfo"))}:{},reports:[]},J=[m.a],Q=Object(h.createStore)(G,$,Object(z.composeWithDevTools)(h.applyMiddleware.apply(void 0,J))),V=function(e,t){var n=document.getElementsByTagName("html")[0];n.style.setProperty("--color-primary",e),n.style.setProperty("--color-secondary",t)};!function(){var e=localStorage.getItem("companyInfo");if(e){var t=JSON.parse(e),n=t.primaryColor,r=t.secondaryColor;V(n,r)}}();var W=function(){return Q.getState().userLogin.userInfo.token},Y={headers:{"Content-Type":"application/json"}},X={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(W())}},K=function(e,t,n){return function(){var r=Object(p.a)(d.a.mark((function r(a){var c,s;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a({type:S}),r.next=4,O.a.post("".concat(f,"/password"),{userId:e,password:t,newPassword:n},X);case 4:c=r.sent,s=c.data,a({type:E,payload:s}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(0),a({type:C,payload:r.t0.response});case 12:case"end":return r.stop()}}),r,null,[[0,9]])})));return function(e){return r.apply(this,arguments)}}()},Z=function(e){return function(){var t=Object(p.a)(d.a.mark((function t(n){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:N}),t.next=4,O.a.put("".concat(f,"/password"),{email:e},X);case 4:r=t.sent,a=r.data,n({type:R,payload:a}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:k,payload:t.t0.response});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},ee=(n(78),n(79),n(0)),te=function(e){var t=e.mode,n=e.toggleMode,r=e.toggleDrawer,a=e.logout,c=Object(l.d)((function(e){return e.userLogin})),s=c.loggedIn,o=c.userInfo,u=o.isAdmin,j=o.isDan,d=Object(l.d)((function(e){return e.company.company}));return Object(ee.jsxs)("nav",{className:"navbar",children:[Object(ee.jsxs)("div",{className:"navbar-title",children:[Object(ee.jsx)(i.b,{to:"/search",children:Object(ee.jsxs)("div",{className:"navbar-logo",children:[Object(ee.jsx)("i",{className:"fas fa-cogs fa-2x"}),Object(ee.jsx)("h2",{children:"TechLog"})]})}),d&&Object(ee.jsx)("h1",{className:"navbar-company-name",children:d.name})]}),Object(ee.jsxs)("div",{className:"navbar-links",children:[s&&Object(ee.jsx)(i.b,{to:"/search",children:"Search"}),s&&Object(ee.jsx)(i.b,{to:"/newreport",children:"New Report"}),s&u?Object(ee.jsx)(i.b,{to:"/company",children:"My Company"}):null,s&u&j?Object(ee.jsx)(i.b,{to:"/addcompany",children:"Add Company"}):null,s&&Object(ee.jsx)(i.b,{to:"/profile",children:"My Profile"}),s&&Object(ee.jsx)(i.b,{to:"/",onClick:a,children:"Logout"}),s&&Object(ee.jsx)("button",{className:"navbar-mode-switch",onClick:n,children:"light"===t?Object(ee.jsx)("i",{className:"fas fa-moon fa-2x"}):Object(ee.jsx)("i",{className:"fas fa-sun fa-2x"})})]}),Object(ee.jsx)("div",{className:"navbar-burger",children:s?Object(ee.jsx)("button",{className:"navbar-burger-switch",onClick:r,children:Object(ee.jsx)("i",{className:"fas fa-bars fa-2x"})}):null})]})},ne=(n(43),n(82),function(e){var t=e.toggleDrawer,n=e.logout,r=Object(l.d)((function(e){return e.userLogin.userInfo})).isAdmin;return Object(ee.jsxs)("div",{className:"drawer-container",style:{animation:"slideIn 1s forwards"},children:[Object(ee.jsx)("button",{onClick:t,children:"X"}),Object(ee.jsxs)("div",{className:"drawer-links",children:[Object(ee.jsx)(i.b,{to:"/search",onClick:t,children:"Search Reports"}),Object(ee.jsx)(i.b,{to:"/newreport",onClick:t,children:"New Report"}),r?Object(ee.jsx)(i.b,{to:"/company",onClick:t,children:"My Company"}):null,Object(ee.jsx)(i.b,{to:"/profile",onClick:t,children:"My Profile"}),Object(ee.jsx)(i.b,{to:"/login",onClick:function(){n(),t()},children:"Logout"})]})]})}),re=n(50),ae=n.n(re),ce=(n(44),function(e){var t=e.comment;return Object(ee.jsxs)("div",{className:"report-comment",children:[Object(ee.jsx)("p",{children:t.comment}),Object(ee.jsxs)("div",{className:"comment-details",children:[Object(ee.jsx)("p",{children:t.user}),Object(ee.jsx)("p",{children:ae()(t.time).format("MMM Do h:mm a")})]})]})}),se=(n(84),function(e){var t,n,r=e.message,a=e.variant;return"success"===a?(t="var(--color-success)",n="far fa-check-circle"):"info"===a?(t="var(--color-info)",n="far fa-question-circle"):(t="var(--color-danger)",n="far fa-times-circle"),Object(ee.jsxs)("div",{className:"alert-container",style:{backgroundColor:t,animation:"fadeIn 1s forwards"},children:[Object(ee.jsx)("i",{className:n}),Object(ee.jsx)("p",{className:"alert-message",children:r})]})}),oe="https://techlog-server-y7u7n.ondigitalocean.app",ie=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(W())}},e.next=3,O.a.post("".concat(oe,"/report"),{newReport:t},n).catch((function(e){return e.response}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(W())}},e.next=3,O.a.put("".concat(oe,"/report"),{editedReport:t},n).catch((function(e){return e.response}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=Object(p.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.delete("".concat(oe,"/report"),{data:{id:t,imageUrls:n,authorization:"Bearer ".concat(W())}}).catch((function(e){return e.response}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),je=function(){var e=Object(p.a)(d.a.mark((function e(t,n,r){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(W())}},e.next=3,O.a.post("".concat(oe,"/comment"),{reportId:t,comment:n,user:r},a).catch((function(e){return e.response}));case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),de=function(){var e=Object(p.a)(d.a.mark((function e(t,n,r,a){var c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(W())}},e.next=3,O.a.post("".concat(oe,"/user"),{name:t,email:n,isAdmin:r,company:a},c).catch((function(e){return e.response}));case 3:return s=e.sent,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),pe=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify(t),e.next=3,O.a.delete("".concat(oe,"/user"),{data:{ids:n,authorization:"Bearer ".concat(W())}}).catch((function(e){return e.response}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(p.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(oe,"/image"),{method:"POST",body:JSON.stringify({file:t,company:n}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(W())}}).then((function(e){return e.json()})).then((function(e){return r=e})).catch((function(e){return console.log("IMAGE UPLOAD FETCH ERROR",e)}));case 2:return e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(oe,"/image"),{method:"PUT",body:JSON.stringify({data:t}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(W())}}).then((function(e){return e.json()})).then((function(e){return n=e})).catch((function(e){return console.log("IMAGE DELETE FETCH ERROR",e)}));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(e){var t=e.setViewReport,n=e.reportDetails,a=e.setReportDetails,c=Object(r.useState)(""),s=Object(o.a)(c,2),u=s[0],j=s[1],b=Object(r.useState)(!1),O=Object(o.a)(b,2),h=O[0],m=O[1],f=Object(r.useState)(!1),x=Object(o.a)(f,2),g=x[0],v=x[1],y=Object(l.d)((function(e){return e.userLogin})).userInfo,S=y.name,E=y.isAdmin,C=n.id,w=n.approved,N=n.approvedBy,R=n.title,k=n.user,I=n.tags,A=n.shortDesc,D=n.longDesc,T=n.steps,_=n.images,U=n.comments,L=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===u){e.next=6;break}return e.next=4,je(C,u,S);case 4:201===e.sent.status?(m(!0),j("")):v(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ee.jsxs)("div",{className:"report-details",style:{animation:"slideUp 1s forwards"},children:[w?Object(ee.jsx)("div",{className:"report-approved",children:Object(ee.jsxs)("p",{children:["Reviewed by ",N.name]})}):Object(ee.jsx)("div",{className:"report-unapproved",children:Object(ee.jsx)("p",{children:"Awaiting review..."})}),Object(ee.jsxs)("div",{className:"report-title",children:[Object(ee.jsxs)("div",{className:"report-author",children:[Object(ee.jsxs)("p",{children:["Report Author: ",k.name]}),Object(ee.jsxs)("p",{children:["Contact: ",k.email]})]}),Object(ee.jsx)("h2",{children:R})]}),Object(ee.jsx)("h4",{children:"Search Tags"}),Object(ee.jsx)("ul",{className:"report-tags",children:I.map((function(e,t){return Object(ee.jsxs)("li",{children:["#",e]},t)}))}),Object(ee.jsx)("h4",{children:"Overview"}),Object(ee.jsx)("p",{children:A}),Object(ee.jsx)("h4",{children:"Detailed"}),Object(ee.jsx)("p",{children:D}),T&&Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)("h4",{children:"Steps"}),Object(ee.jsx)("ul",{children:T.map((function(e,t){return Object(ee.jsxs)("li",{children:[t+1,": ",e]},t)}))})]}),_.length>0&&Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)("h4",{children:"Images"}),Object(ee.jsx)("ul",{children:_.map((function(e){return Object(ee.jsx)("img",{className:"report-detail-image",src:e.imageUrl,alt:e.assetId},e.assetId)}))})]}),Object(ee.jsxs)("div",{className:"report-details-buttons",children:[Object(ee.jsx)("button",{onClick:function(){t(!1),a({})},children:"BACK TO SEARCH"}),E&&Object(ee.jsx)(i.b,{to:"/editreport",children:Object(ee.jsx)("button",{onClick:function(){t(!1)},children:"EDIT REPORT"})})]}),Object(ee.jsx)("h4",{children:"Comments"}),U.length>0?Object(ee.jsx)(ee.Fragment,{children:Object(ee.jsx)("ul",{children:U.map((function(e,t){return Object(ee.jsx)(ce,{comment:e},t)}))})}):Object(ee.jsx)("p",{children:"No comments yet..."}),h&&Object(ee.jsx)(se,{message:"Comment submitted!",variant:"success"}),g&&Object(ee.jsx)(se,{message:"Something went wrong...",variant:"danger"}),Object(ee.jsxs)("form",{className:"submit-comment",onSubmit:L,children:[Object(ee.jsx)("textarea",{value:u,placeholder:"Add a comment...",onChange:function(e){j(e.target.value)}}),Object(ee.jsx)("button",{type:"submit",children:"ADD COMMENT"})]})]})},me=function(e){var t=e.toggleDrawer,n=e.logout;if(e.drawer)return Object(a.createPortal)(Object(ee.jsx)("div",{className:"backdrop-container",children:Object(ee.jsx)(ne,{toggleDrawer:t,logout:n,children:"Drawer"})}),document.getElementById("backdrop-hook"));var r=e.setViewReport,c=e.reportDetails,s=e.setReportDetails;return Object(a.createPortal)(Object(ee.jsx)("div",{className:"backdrop-container",children:Object(ee.jsx)(he,{setViewReport:r,reportDetails:c,setReportDetails:s})}),document.getElementById("backdrop-hook"))},fe="https://techlog-server-y7u7n.ondigitalocean.app/graphql";function xe(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(p.a)(d.a.mark((function e(t){var n,r,a,c,s=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({query:t,variables:n})},e.next=4,fetch(fe,r);case 4:return a=e.sent,e.next=7,a.json();case 7:return c=e.sent,e.abrupt("return",c.data);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\n    query($id:ID!){\n      companyDetails(id:$id){\n        name\n        address\n        primaryColor\n        secondaryColor\n        logoUrl\n      }\n    }\n  ",e.next=3,xe("\n    query($id:ID!){\n      companyDetails(id:$id){\n        name\n        address\n        primaryColor\n        secondaryColor\n        logoUrl\n      }\n    }\n  ",{id:t});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\n    query($id:ID!){\n      companyReports(id:$id){\n        id\n        title\n        user {\n            id\n            name\n            email\n        }\n        company {\n          id\n          name\n        }\n        tags\n        shortDesc\n        longDesc\n        steps\n        images {\n          id\n          assetId\n          publicId\n          imageUrl\n        }\n        comments {\n          id\n          user\n          comment\n          time\n        }\n        approved\n        approvedBy {\n          id\n          name\n          email\n        }\n      }\n    }\n  ",e.next=3,xe("\n    query($id:ID!){\n      companyReports(id:$id){\n        id\n        title\n        user {\n            id\n            name\n            email\n        }\n        company {\n          id\n          name\n        }\n        tags\n        shortDesc\n        longDesc\n        steps\n        images {\n          id\n          assetId\n          publicId\n          imageUrl\n        }\n        comments {\n          id\n          user\n          comment\n          time\n        }\n        approved\n        approvedBy {\n          id\n          name\n          email\n        }\n      }\n    }\n  ",{id:t});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e){return we.apply(this,arguments)}function we(){return(we=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\n    query ($id:ID!){\n      companyDetails(id:$id) {\n        users {\n          id\n          name\n          email\n          isAdmin\n        }\n      }\n    }\n  ",e.next=3,xe("\n    query ($id:ID!){\n      companyDetails(id:$id) {\n        users {\n          id\n          name\n          email\n          isAdmin\n        }\n      }\n    }\n  ",{id:t});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ne=n(15),Re=(n(85),function(e){var t=e.history,n=Object(l.c)(),a=Object(l.d)((function(e){return e.userLogin})),c=a.loading,s=a.error,u=a.loggedIn,j=Object(r.useState)(""),b=Object(o.a)(j,2),h=b[0],m=b[1],y=Object(r.useState)(""),S=Object(o.a)(y,2),E=S[0],C=S[1];Object(r.useEffect)((function(){u&&(n(function(){var e=Object(p.a)(d.a.mark((function e(t,n){var r,a,c,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=n().userLogin.userInfo.company,t({type:U}),e.next=5,ve(r);case 5:a=e.sent,c=a.companyDetails,s=c.primaryColor,o=c.secondaryColor,t({type:L,payload:c}),V(s,o),localStorage.setItem("companyInfo",JSON.stringify(c)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),t({type:M,payload:e.t0.response});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}()),t.push("/search"))}),[u,t,n]);return Object(ee.jsx)("div",{className:"login-container",children:c?Object(ee.jsx)(Ne.BeatLoader,{size:40,color:"#C0C0C0"}):Object(ee.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(function(e,t){return function(){var n=Object(p.a)(d.a.mark((function n(r){var a,c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r({type:x}),n.next=4,O.a.post("".concat(f,"/login"),{email:e,password:t},Y);case 4:a=n.sent,c=a.data,r({type:g,payload:c}),localStorage.setItem("userInfo",JSON.stringify(c)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),r({type:v,payload:n.t0.response});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(h,E))},children:[Object(ee.jsx)("label",{children:"Email:"}),Object(ee.jsx)("input",{type:"email",placeholder:"Please enter email...",required:!0,onChange:function(e){return m(e.target.value)}}),Object(ee.jsx)("label",{children:"Password:"}),Object(ee.jsx)("input",{type:"password",placeholder:"Please enter password...",required:!0,onChange:function(e){return C(e.target.value)}}),Object(ee.jsx)("button",{type:"submit",className:"login-btn",children:"Log in!"}),Object(ee.jsx)("span",{className:"login-forgot-password",children:Object(ee.jsx)(i.b,{to:"/newpassword",children:"Forgot your password?"})}),s&&Object(ee.jsx)(se,{message:s.data.message})]})})}),ke=(n(113),function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(l.d)((function(e){return e.passwordReset})),s=c.loading,u=c.message,j=c.error,b=Object(l.c)(),O=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),b(Z(n));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){b({type:I})}),[b]),s?Object(ee.jsx)("div",{className:"beat-loader",children:Object(ee.jsx)(Ne.BeatLoader,{size:40,color:"#C0C0C0"})}):Object(ee.jsxs)("div",{className:"reset-password-container",children:[Object(ee.jsxs)("form",{className:"reset-password-form",onSubmit:O,children:[Object(ee.jsx)("label",{children:"Enter your registered email:"}),Object(ee.jsx)("input",{type:"email",placeholder:"Please enter email...",required:!0,value:n,onChange:function(e){return a(e.target.value)}}),Object(ee.jsx)("button",{type:"submit",children:"Submit"})]}),Object(ee.jsx)("div",{className:"reset-password-alerts",children:u?Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(se,{message:u.message,variant:"success"}),Object(ee.jsx)(i.b,{to:"/login",children:"Back to login screen..."})," "]}):j?Object(ee.jsx)(se,{message:j.data.message,variant:"danger"}):null})]})}),Ie=n(11),Ae=n(27),De=n.n(Ae),Te=(n(46),function(e){var t=e.searchterm,n=e.removeSearchTerm;return Object(ee.jsx)("li",{className:"searchTag",children:Object(ee.jsxs)("button",{onClick:function(){n(t)},children:[Object(ee.jsx)("i",{className:"fas fa-hashtag"}),Object(ee.jsx)("p",{children:t})]})})}),_e=function(e){var t=e.searchTerms,n=e.addSearchTerm,a=e.removeSearchTerm,c=Object(r.useState)(""),s=Object(o.a)(c,2),i=s[0],u=s[1];return Object(ee.jsxs)("div",{className:"searchbar-container",style:{animation:"fadeIn 1s forwards"},children:[0===t.length&&Object(ee.jsx)("p",{className:"searchbar-no-terms",children:"Please enter a search term..."}),Object(ee.jsx)("ul",{children:t.map((function(e,t){return Object(ee.jsx)(Te,{searchterm:e,removeSearchTerm:a},t)}))}),Object(ee.jsxs)("form",{className:"search-term-form",onSubmit:function(e){e.preventDefault(),n(i),document.querySelector(".search-term-form").reset()},children:[Object(ee.jsx)("i",{className:"fas fa-hashtag"}),Object(ee.jsx)("input",{type:"text",onChange:function(e){return u(e.target.value)}}),Object(ee.jsx)("button",{type:"submit",children:"Search"})]})]})},Ue=(n(115),function(e){var t=e.report,n=e.searchTerms,r=e.setViewReport,a=e.setReportDetails;return function(){var e=!0;return n.forEach((function(n){t.tags.includes(n)||(e=!1)})),e}()?Object(ee.jsxs)("div",{className:"report-tile",style:{animation:"fadeIn 1s forwards"},children:[Object(ee.jsxs)("div",{className:"report-tile-title",children:[Object(ee.jsx)("h2",{children:t.title}),Object(ee.jsx)("ul",{children:t.tags.map((function(e,t){return Object(ee.jsxs)("li",{children:["#",e]},t)}))})]}),Object(ee.jsxs)("div",{className:"report-tile-content",children:[Object(ee.jsx)("p",{children:t.shortDesc}),Object(ee.jsx)("button",{onClick:function(){a(t),r(!0)},children:"More info"})]})]}):null}),Le=(n(116),function(e){var t=e.history,n=e.setViewReport,a=e.setReportDetails,c=Object(l.d)((function(e){return e.userLogin.loggedIn}));!c&&t.push("/login");var s=Object(l.d)((function(e){return e.userLogin.userInfo})),i=s.company,u=s.isAdmin,j=Object(l.d)((function(e){return e.reports.loading})),b=Object(l.d)((function(e){return e.reports})),O=b.error,h=b.reports,m=Object(r.useState)([]),f=Object(o.a)(m,2),x=f[0],g=f[1],v=Object(r.useState)([]),y=Object(o.a)(v,2),S=y[0],E=y[1],C=Object(r.useState)(!1),w=Object(o.a)(C,2),N=w[0],R=w[1],k=Object(l.c)();Object(r.useEffect)((function(){var e;c&&k((e=i,function(){var t=Object(p.a)(d.a.mark((function t(n){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:A}),t.next=4,Se(e);case 4:r=t.sent,a=r.companyReports,n({type:D,payload:a}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:T,payload:t.t0.response});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()))}),[i,c,k]),Object(r.useEffect)((function(){if(h){var e=h.filter((function(e){return!1===e.approved}));E(e)}}),[h]);return Object(ee.jsx)("div",{className:"searchReports-container",children:j?Object(ee.jsx)("div",{className:"beat-loader",children:Object(ee.jsx)(Ne.BeatLoader,{size:40,color:"#C0C0C0"})}):O?Object(ee.jsx)(se,{children:O.message}):h?Object(ee.jsxs)(ee.Fragment,{children:[u&&Object(ee.jsxs)("label",{className:"search-reports-unapproved-switch",children:[Object(ee.jsx)(De.a,{onChange:function(){R(!N)},checked:N}),Object(ee.jsx)("p",{children:"Show Unapproved"})]}),Object(ee.jsx)(_e,{searchTerms:x,addSearchTerm:function(e){"#"===e.charAt(0)&&(e=e.slice(1)),x.includes(e)||g([].concat(Object(Ie.a)(x),[e.toLowerCase()]))},removeSearchTerm:function(e){var t=Object(Ie.a)(x).filter((function(t){return t!==e}));g(t)}}),Object(ee.jsx)("div",{className:"searchReports-tiles-container",children:N?S.map((function(e,t){return Object(ee.jsx)(Ue,{report:e,searchTerms:x,setViewReport:n,setReportDetails:a,children:e.title},t)})):h.map((function(e,t){return Object(ee.jsx)(Ue,{report:e,searchTerms:x,setViewReport:n,setReportDetails:a,children:e.title},t)}))})]}):null})}),Me=function(e){var t=e.reportTags,n=e.setReportTags,r=function(e){var r=Object(Ie.a)(t);if(e.target.checked)r.push(e.target.value),n(r);else{var a=r.filter((function(t){return t!==e.target.value}));n(a)}};return Object(ee.jsxs)("div",{className:"checkbox-container",children:[Object(ee.jsxs)("div",{className:"searchtag-container",children:[Object(ee.jsx)("label",{children:"#electrical"}),Object(ee.jsx)("input",{type:"checkbox",className:"searchtag-checkbox",value:"electrical",onChange:r})]}),Object(ee.jsxs)("div",{className:"searchtag-container",children:[Object(ee.jsx)("label",{children:"#hydraulic"}),Object(ee.jsx)("input",{type:"checkbox",className:"searchtag-checkbox",value:"hydraulic",onChange:r})]}),Object(ee.jsxs)("div",{className:"searchtag-container",children:[Object(ee.jsx)("label",{children:"#kystdesign"}),Object(ee.jsx)("input",{type:"checkbox",className:"searchtag-checkbox",value:"kystdesign",onChange:r})]}),Object(ee.jsxs)("div",{className:"searchtag-container",children:[Object(ee.jsx)("label",{children:"#schilling"}),Object(ee.jsx)("input",{type:"checkbox",className:"searchtag-checkbox",value:"schilling",onChange:r})]}),Object(ee.jsxs)("div",{className:"searchtag-container",children:[Object(ee.jsx)("label",{children:"#manipulator"}),Object(ee.jsx)("input",{type:"checkbox",className:"searchtag-checkbox",value:"manipulator",onChange:r})]})]})},Pe=(n(117),function(e){var t=e.reportImages,n=e.setReportImages,a=Object(r.useState)(""),c=Object(o.a)(a,2),s=c[0],i=c[1],u=Object(r.useState)(""),j=Object(o.a)(u,2),b=j[0],O=j[1],h=Object(l.d)((function(e){return e.company.company.name})),m=function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.files[0],i(t.target.value),O(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.getAttribute("data-publicid"),e.next=4,Oe(n);case 4:"ok"===e.sent.result&&g(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){var r=Object(Ie.a)(t);r.push(e),n(r)},g=function(e){var r=Object(Ie.a)(t).filter((function(t){return t.publicId!==e}));n(r)};return Object(ee.jsxs)("div",{className:"images-container",children:[Object(ee.jsx)("label",{children:"Images"}),Object(ee.jsx)("p",{className:"report-helper",children:"Any supporting images."}),Object(ee.jsx)("p",{className:"report-helper",children:"Click an image to delete it."}),Object(ee.jsx)("hr",{}),Object(ee.jsxs)("div",{children:[0===t.length?Object(ee.jsx)("p",{className:"no-images-text",children:"No images yet..."}):Object(ee.jsx)("ul",{className:"images-uploaded",children:t.map((function(e){return Object(ee.jsx)("li",{children:Object(ee.jsx)("img",{className:"image-thumbnail","data-publicid":e.publicId,src:e.imageUrl,alt:e.assetId,onClick:f})},e.assetId)}))}),Object(ee.jsxs)("div",{className:"pic-upload-container",children:[Object(ee.jsx)("input",{type:"file",className:"pic-upload-input",value:s,onChange:function(e){return m(e)}}),Object(ee.jsx)("button",{onClick:function(e){if(e.preventDefault(),b){var t=new FileReader;t.readAsDataURL(b),t.onloadend=Object(p.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be(t.result,h);case 2:n=e.sent,console.log("result",n),x(n),i(""),O("");case 7:case"end":return e.stop()}}),e)}))),t.onerror=function(){console.log("Image upload error")}}},children:"Add Image"})]})]})]})}),Be=(n(118),function(e){var t=e.history;!Object(l.d)((function(e){return e.userLogin.loggedIn}))&&t.push("/login");var n=Object(l.d)((function(e){return e.userLogin.userInfo._id})),a=Object(l.d)((function(e){return e.userLogin.userInfo.company})),c=Object(r.useState)(""),s=Object(o.a)(c,2),i=s[0],u=s[1],j=Object(r.useState)([]),b=Object(o.a)(j,2),O=b[0],h=b[1],m=Object(r.useState)(""),f=Object(o.a)(m,2),x=f[0],g=f[1],v=Object(r.useState)(""),y=Object(o.a)(v,2),S=y[0],E=y[1],C=Object(r.useState)([]),w=Object(o.a)(C,2),N=w[0],R=w[1],k=Object(r.useState)([]),I=Object(o.a)(k,2),A=I[0],D=I[1],T=Object(r.useState)(""),_=Object(o.a)(T,2),U=_[0],L=_[1],M=Object(r.useState)(""),P=Object(o.a)(M,2),B=P[0],F=P[1],q=Object(r.useState)(!1),H=Object(o.a)(q,2),z=H[0],G=H[1],$=Object(r.useState)(!1),J=Object(o.a)($,2),Q=J[0],V=J[1],W=Object(r.useState)(!1),Y=Object(o.a)(W,2),X=Y[0],K=Y[1],Z=function(){var e=Object(p.a)(d.a.mark((function e(t){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),G(!0),r={title:i,user:n,company:a,tags:O,shortDesc:x,longDesc:S,steps:N,images:A},e.next=5,ie(r);case 5:c=e.sent,G(!1),201===c.status?V(!0):K(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return z?Object(ee.jsx)("div",{className:"beat-loader",children:Object(ee.jsx)(Ne.BeatLoader,{size:40,color:"#C0C0C0"})}):Q?Object(ee.jsx)(se,{message:"Form submitted!",variant:"success"}):X?Object(ee.jsx)(se,{message:"Form submission error...",variant:"danger"}):Object(ee.jsx)("div",{className:"new-report-container",children:Object(ee.jsxs)("form",{className:"new-report-form",onSubmit:function(e){return Z(e)},children:[Object(ee.jsx)("label",{children:"Report Title"}),Object(ee.jsx)("hr",{}),Object(ee.jsx)("input",{required:!0,className:"new-report-title",type:"text",placeholder:"Please enter a report title...",value:i,onChange:function(e){return u(e.target.value)}}),Object(ee.jsx)("label",{children:"Search Tags"}),Object(ee.jsx)("p",{className:"report-helper",children:"Any search terms that will help to find the report in future"}),Object(ee.jsx)("p",{className:"report-helper",children:"Click a tag to delete it."}),Object(ee.jsx)("hr",{}),Object(ee.jsx)(Me,{reportTags:O,setReportTags:h}),Object(ee.jsx)("ul",{className:"new-report-tags-ul",children:O.length>0?O.map((function(e,t){return Object(ee.jsxs)("li",{onClick:function(e){return function(e){e.preventDefault();var t=Object(Ie.a)(O),n=e.target.innerText.slice(1),r=t.filter((function(e){return e!==n}));h(r);var a=document.querySelectorAll(".searchtag-checkbox");Array.from(a).forEach((function(e){n===e.value&&(e.checked=!1)}))}(e)},children:["#",e]},t)})):Object(ee.jsx)("p",{children:"No tags yet..."})}),Object(ee.jsx)("input",{type:"text",placeholder:"Please enter a custom tag..",value:U,onChange:function(e){return L(e.target.value)}}),Object(ee.jsx)("button",{onClick:function(e){return function(e){e.preventDefault();var t=Object(Ie.a)(O);t.push(U),h(t),L("")}(e)},children:"Add Custom Tag"}),Object(ee.jsx)("label",{children:"Report Summary"}),Object(ee.jsx)("p",{className:"report-helper",children:"A short, descriptive summary of the issue"}),Object(ee.jsx)("hr",{}),Object(ee.jsx)("textarea",{required:!0,className:"new-report-shortDesc",placeholder:"Please enter a short description...",value:x,onChange:function(e){return g(e.target.value)}}),Object(ee.jsx)("label",{children:"Description"}),Object(ee.jsx)("p",{className:"report-helper",children:"A detailed description of the issue, and how it was resolved"}),Object(ee.jsx)("hr",{}),Object(ee.jsx)("textarea",{required:!0,className:"new-report-longDesc",placeholder:"Please enter a detailed description...",value:S,onChange:function(e){return E(e.target.value)}}),Object(ee.jsx)("label",{children:"Steps"}),Object(ee.jsx)("p",{className:"report-helper",children:"A step by step guide to resolving the issue, if appropriate."}),Object(ee.jsx)("p",{className:"report-helper",children:"Click a step to delete it."}),Object(ee.jsx)("hr",{}),Object(ee.jsx)("ul",{className:"new-report-steps-ul",children:N.length>0?N.map((function(e,t){return Object(ee.jsxs)("li",{onClick:function(e){return function(e){e.preventDefault();var t=Object(Ie.a)(N),n=e.target.innerText.split(":")[0]-1;t.splice(n,1),R(t)}(e)},children:[t+1,": ",e]},t)})):Object(ee.jsx)("p",{children:"No steps yet..."})}),Object(ee.jsx)("input",{type:"text",onChange:function(e){return F(e.target.value)},value:B}),Object(ee.jsx)("button",{onClick:function(e){return function(e){e.preventDefault();var t=Object(Ie.a)(N);t.push(B),R(t),F("")}(e)},children:"Add Step"}),Object(ee.jsx)(Pe,{reportImages:A,setReportImages:D}),Object(ee.jsx)("button",{type:"submit",children:"Submit Report"})]})})}),Fe=n(28),qe=(n(119),function(e){var t=e.history,n=e.reportDetails;e.setReportDetails;!Object(l.d)((function(e){return e.userLogin.loggedIn}))&&t.push("/login");var a=Object(l.d)((function(e){return e.userLogin.userInfo})),c=n.id,u=n.title,j=n.user,b=n.tags,O=n.shortDesc,h=n.longDesc,m=n.steps,f=n.images,x=n.comments,g=n.approved,v=n.approvedBy,y=Object(r.useState)(u),S=Object(o.a)(y,2),E=S[0],C=S[1],w=Object(r.useState)(b),N=Object(o.a)(w,2),R=N[0],k=N[1],I=Object(r.useState)(O),A=Object(o.a)(I,2),D=A[0],T=A[1],_=Object(r.useState)(h),U=Object(o.a)(_,2),L=U[0],M=U[1],P=Object(r.useState)(m),B=Object(o.a)(P,2),F=B[0],q=B[1],H=Object(r.useState)(f),z=Object(o.a)(H,2),G=z[0],$=z[1],J=Object(r.useState)(x),Q=Object(o.a)(J,2),V=Q[0],W=Q[1],Y=Object(r.useState)(""),X=Object(o.a)(Y,2),K=X[0],Z=X[1],te=Object(r.useState)(""),ne=Object(o.a)(te,2),re=ne[0],ae=ne[1],oe=Object(r.useState)(g),ie=Object(o.a)(oe,2),je=ie[0],de=ie[1],pe=Object(r.useState)(v),be=Object(o.a)(pe,2),Oe=be[0],he=be[1],me=Object(r.useState)(!1),fe=Object(o.a)(me,2),xe=fe[0],ge=fe[1],ve=Object(r.useState)(!1),ye=Object(o.a)(ve,2),Se=ye[0],Ee=ye[1],Ce=Object(r.useState)(!1),we=Object(o.a)(Ce,2),Re=we[0],ke=we[1],Ae=Object(r.useState)(!1),Te=Object(o.a)(Ae,2),_e=Te[0],Ue=Te[1],Le=Object(r.useState)(!1),Me=Object(o.a)(Le,2),Be=Me[0];Me[1];Object(r.useEffect)((function(){}),[K]);var qe=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={id:c,title:E,tags:R,shortDesc:D,longDesc:L,steps:F,images:G,comments:V,approved:je,approvedBy:Oe},ge(!0),e.next=5,ue(n);case 5:r=e.sent,ge(!1),200===r.status?Ee(!0):ke(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),He=function(e){e.preventDefault();var t=e.target.parentElement.innerText.slice(2,-2),n=Object(Ie.a)(R).filter((function(e){return e!==t}));k(n)},ze=function(e){e.preventDefault();var t=e.target.parentElement.innerText.split(":")[0]-1,n=Object(Ie.a)(F);n.splice(t,1),q(n)},Ge=function(e){e.preventDefault(),Ue(!_e)},$e=function(){var e=Object(p.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,le(c,f);case 3:n=e.sent,console.log(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return xe?Object(ee.jsx)("div",{className:"beat-loader",children:Object(ee.jsx)(Ne.BeatLoader,{size:40,color:"#C0C0C0"})}):Se?Object(ee.jsxs)("div",{children:[Object(ee.jsx)(se,{message:"Form edit submitted!",variant:"success"}),Object(ee.jsx)(i.b,{to:"/search",children:Object(ee.jsx)("button",{children:"Back to search"})})]}):Re?Object(ee.jsx)(se,{message:"Form submission error!",variant:"danger"}):Be?Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)("p",{children:"Report deleted"}),Object(ee.jsx)(i.b,{to:"/search",children:Object(ee.jsx)("button",{children:"Back to search"})})]}):_e?Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsxs)("p",{children:["Are you sure you want to delete ",u,"?"]}),Object(ee.jsx)("button",{onClick:Ge,children:"BACK"}),Object(ee.jsx)("button",{onClick:$e,children:"CONFIRM"})]}):Object(ee.jsx)("div",{className:"edit-report-container",children:Object(ee.jsxs)("form",{className:"edit-report-form",onSubmit:qe,children:[Object(ee.jsx)("label",{children:"Title"}),Object(ee.jsx)("input",{required:!0,className:"edit-report-title",type:"text",value:E,onChange:function(e){return C(e.target.value)}}),Object(ee.jsx)("label",{children:"Author"}),Object(ee.jsx)("p",{children:j&&j.name}),Object(ee.jsx)("label",{children:"Contact"}),Object(ee.jsx)("p",{children:j&&j.email}),Object(ee.jsx)("label",{children:"SearchTags"}),Object(ee.jsx)("ul",{className:"edit-report-searchtags",children:R&&R.map((function(e,t){return Object(ee.jsxs)("li",{children:["# ",e," ",Object(ee.jsx)("button",{onClick:He,children:"X"})]},t)}))}),Object(ee.jsx)("input",{type:"text",value:K,onChange:function(e){Z(e.target.value)}}),Object(ee.jsx)("button",{onClick:function(e){e.preventDefault();var t=Object(Ie.a)(R);t.push(K),k(t),Z("")},children:"Add Tag"}),Object(ee.jsx)("label",{children:"Short Description"}),Object(ee.jsx)("textarea",{required:!0,value:D,onChange:function(e){return T(e.target.value)}}),Object(ee.jsx)("label",{children:"Long Description"}),Object(ee.jsx)("textarea",{required:!0,value:L,onChange:function(e){return M(e.target.value)}}),Object(ee.jsx)("label",{children:"Steps"}),Object(ee.jsx)(Fe.a,{onDragEnd:function(e){if(e.destination){var t=Object(Ie.a)(F),n=t.splice(e.source.index,1),r=Object(o.a)(n,1)[0];t.splice(e.destination.index,0,r),q(t)}},children:Object(ee.jsx)(Fe.c,{droppableId:"edit-report-steps",children:function(e){return Object(ee.jsxs)("ul",Object(s.a)(Object(s.a)({className:"report-steps-ul"},e.droppableProps),{},{ref:e.innerRef,children:[F.map((function(e,t){return Object(ee.jsx)(Fe.b,{draggableId:e,index:t,children:function(n){return Object(ee.jsxs)("li",Object(s.a)(Object(s.a)(Object(s.a)({},n.draggableProps),n.dragHandleProps),{},{ref:n.innerRef,children:[t+1,": ",e,Object(ee.jsx)("button",{onClick:ze,children:"X"})]}))}},e)})),e.placeholder]}))}})}),Object(ee.jsx)("input",{type:"text",value:re,onChange:function(e){ae(e.target.value)}}),Object(ee.jsx)("button",{onClick:function(e){e.preventDefault();var t=Object(Ie.a)(F);t.push(re),q(t),ae("")},children:"Add Step"}),Object(ee.jsx)(Pe,{reportImages:G,setReportImages:$}),Object(ee.jsxs)("label",{children:[Object(ee.jsx)("span",{children:"Report Approved:"}),Object(ee.jsx)(De.a,{onChange:function(){je?(de(!1),he(null)):(de(!0),he(a))},checked:je}),Object(ee.jsx)("span",{children:Oe&&Object(ee.jsx)("p",{children:Oe.name})})]}),Object(ee.jsx)("button",{type:"submit",children:"SUBMIT"}),Object(ee.jsx)("button",{onClick:Ge,children:"DELETE"}),Object(ee.jsx)("label",{children:"Comments"}),Object(ee.jsx)("ul",{className:"edit-report-comments",children:V.map((function(e,t){return Object(ee.jsxs)("li",{children:[Object(ee.jsx)(ce,{comment:e}),Object(ee.jsx)("button",{onClick:function(t){return function(e,t){e.preventDefault();var n=Object(Ie.a)(V).filter((function(e){return e.id!==t}));W(n)}(t,e.id)},children:"X"})]},t)}))})]})})}),He=function(e){var t=e.user,n=e.checkboxHandler,r=t.id,a=t.name,c=t.email,s=t.isAdmin;return Object(ee.jsxs)("div",{children:[a,c,s?Object(ee.jsx)("p",{children:"Admin"}):Object(ee.jsx)("p",{children:"User"}),Object(ee.jsx)("input",{type:"checkbox",className:"delete-user-checkbox",onChange:function(e){return n(e,r)}})]})},ze=function(e){var t=e.history;!Object(l.d)((function(e){return e.userLogin.loggedIn}))&&t.push("/login");var n=Object(r.useReducer)((function(e,t){switch(t.type){case"USER_NAME":return Object(s.a)(Object(s.a)({},e),{},{submitMessage:"",submitError:"",deleteMessage:"",deleteError:"",username:t.value});case"USER_EMAIL":return Object(s.a)(Object(s.a)({},e),{},{submitMessage:"",submitError:"",deleteMessage:"",deleteError:"",userEmail:t.value});case"USER_ADMIN":return Object(s.a)(Object(s.a)({},e),{},{submitMessage:"",submitError:"",deleteMessage:"",deleteError:"",userAdmin:t.value});case"SUBMIT_USER_REQUEST":return Object(s.a)(Object(s.a)({},e),{},{submitLoading:!0});case"SUBMIT_USER_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{submitLoading:!1,submitMessage:t.value,username:"",userEmail:"",userAdmin:!1});case"SUBMIT_USER_FAILURE":return Object(s.a)(Object(s.a)({},e),{},{submitLoading:!1,submitError:t.value});case"DELETE_USER_REQUEST":return Object(s.a)(Object(s.a)({},e),{},{deleteLoading:!0});case"DELETE_USER_SUCCESS":return Object(s.a)(Object(s.a)({},e),{},{deleteLoading:!1,deleteMessage:t.value});case"DELETE_USER_FAILURE":return Object(s.a)(Object(s.a)({},e),{},{deleteLoading:!1,deleteError:t.value});case"CLEAR_MESSAGES":return Object(s.a)(Object(s.a)({},e),{},{submitMessage:"",submitError:"",deleteMessage:"",deleteError:""});default:return e}}),{username:"",userEmail:"",userAdmin:!1,submitLoading:!1,submitMessage:"",submitError:"",deleteLoading:!1,deleteMessage:"",deleteError:""}),a=Object(o.a)(n,2),c=a[0],i=a[1],u=Object(l.c)(),j=Object(l.d)((function(e){return e.userLogin.userInfo.company})),b=Object(l.d)((function(e){return e.companyUsers})),O=b.users,h=b.loading,m=Object(r.useState)([]),f=Object(o.a)(m,2),x=f[0],g=f[1];Object(r.useEffect)((function(){u(function(){var e=Object(p.a)(d.a.mark((function e(t,n){var r,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:B}),r=n().userLogin.userInfo.company,e.next=5,Ce(r);case 5:a=e.sent,c=a.companyDetails.users,t({type:F,payload:c}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t({type:q,payload:e.t0.response});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}())}),[u,c.submitLoading,c.deleteLoading]);var v=function(){var e=Object(p.a)(d.a.mark((function e(t){var n,r,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),i({type:"SUBMIT_USER_REQUEST"}),n=c.username,r=c.userEmail,a=c.userAdmin,e.next=5,de(n,r,a,j);case 5:201===(s=e.sent).status?i({type:"SUBMIT_USER_SUCCESS",value:s.data.message}):i({type:"SUBMIT_USER_FAILURE",value:s.data.message});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(x.length>0)){e.next=7;break}return i({type:"CLEAR_MESSAGES"}),i({type:"DELETE_USER_REQUEST"}),e.next=5,pe(x);case 5:200===(t=e.sent).status?(i({type:"DELETE_USER_SUCCESS",value:t.data.message}),g([])):i({type:"DELETE_USER_FAILURE",value:t.data.message});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(e,t){var n=Object(Ie.a)(x);if(e.target.checked)n.push(t),g(n);else{var r=n.filter((function(e){return e!==t}));g(r)}};return Object(ee.jsxs)("div",{className:"company-container",children:[Object(ee.jsx)("div",{className:"company-add-user",children:c.submitLoading?Object(ee.jsx)("p",{children:"Uploading user..."}):Object(ee.jsxs)("form",{className:"add-company-user",onSubmit:function(e){return v(e)},children:[Object(ee.jsx)("label",{children:"New User Name"}),Object(ee.jsx)("input",{type:"text",value:c.username,onChange:function(e){return i({type:"USER_NAME",value:e.target.value})},required:!0}),Object(ee.jsx)("label",{children:"New User Email"}),Object(ee.jsx)("input",{type:"email",value:c.userEmail,onChange:function(e){return i({type:"USER_EMAIL",value:e.target.value})},required:!0}),Object(ee.jsx)("label",{children:"Admin"}),Object(ee.jsx)("input",{type:"checkbox",checked:c.userAdmin,onChange:function(){c.userAdmin?i({type:"USER_ADMIN",value:!1}):i({type:"USER_ADMIN",value:!0})}}),Object(ee.jsx)("button",{type:"submit",children:"Add User"})]})}),Object(ee.jsx)("div",{className:"company-add-user-alerts",children:c.submitMessage?Object(ee.jsx)(se,{message:c.submitMessage,variant:"success"}):c.submitError?Object(ee.jsx)(se,{message:c.submitError,variant:"danger"}):null}),Object(ee.jsxs)("div",{className:"company-users",children:[h?Object(ee.jsx)("div",{className:"beat-loader",children:Object(ee.jsx)(Ne.BeatLoader,{size:40,color:"#C0C0C0"})}):O?O.map((function(e){return Object(ee.jsx)(He,{user:e,checkboxHandler:S},e.id)})):Object(ee.jsx)("p",{children:"No users..."}),Object(ee.jsx)("div",{className:"company-delete-user-alerts",children:c.deleteMessage?Object(ee.jsx)(se,{message:c.deleteMessage,variant:"success"}):c.deleteError?Object(ee.jsx)(se,{message:c.deleteError,variant:"danger"}):null}),Object(ee.jsx)("button",{onClick:y,children:"Delete selected users"})]})]})},Ge=function(e){var t=e.history;return!Object(l.d)((function(e){return e.userLogin.loggedIn}))&&t.push("/login"),Object(ee.jsx)("div",{children:"Add Company"})},$e=(n(120),function(e){var t=e.history;!Object(l.d)((function(e){return e.userLogin.loggedIn}))&&t.push("/login");var n=Object(l.c)(),a=Object(l.d)((function(e){return e.userLogin.userInfo._id})),c=Object(l.d)((function(e){return e.passwordChange})),s=c.loading,i=c.message,u=c.error,j=Object(r.useState)(""),b=Object(o.a)(j,2),O=b[0],h=b[1],m=Object(r.useState)(""),f=Object(o.a)(m,2),x=f[0],g=f[1],v=Object(r.useState)(""),y=Object(o.a)(v,2),S=y[0],E=y[1],C=Object(r.useState)(!1),N=Object(o.a)(C,2),R=N[0],k=N[1];Object(r.useEffect)((function(){n({type:w})}),[n]);var I=function(){var e=Object(p.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),x===S){e.next=4;break}return k(!0),e.abrupt("return");case 4:k(!1),n(K(a,O,x));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s?Object(ee.jsx)("div",{className:"beat-loader",children:Object(ee.jsx)(Ne.BeatLoader,{size:40,color:"#C0C0C0"})}):Object(ee.jsxs)("div",{className:"myprofile-container",children:[Object(ee.jsx)("h2",{children:"Change Password"}),Object(ee.jsxs)("form",{onSubmit:I,children:[Object(ee.jsx)("label",{children:"Current password"}),Object(ee.jsx)("input",{value:O,onChange:function(e){return h(e.target.value)},type:"password",required:!0}),Object(ee.jsx)("label",{children:"New password"}),Object(ee.jsx)("input",{value:x,onChange:function(e){return g(e.target.value)},type:"password",required:!0}),Object(ee.jsx)("label",{children:"Confirm new password"}),Object(ee.jsx)("input",{value:S,onChange:function(e){return E(e.target.value)},type:"password",required:!0}),Object(ee.jsx)("button",{type:"submit",children:"Change password"})]}),R&&Object(ee.jsx)(se,{message:"New passwords don't match!",variant:"danger"}),i&&Object(ee.jsx)(se,{message:"Password updated!",variant:"success"}),u&&Object(ee.jsx)(se,{message:"Password update error!",variant:"danger"})]})}),Je=function(){var e=Object(r.useState)("light"),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),j=Object(o.a)(c,2),d=j[0],p=j[1],b=Object(r.useState)(!1),O=Object(o.a)(b,2),h=O[0],m=O[1],f=Object(r.useState)({}),x=Object(o.a)(f,2),g=x[0],v=x[1],S=Object(l.c)(),E=function(){document.documentElement.classList.add("transition"),window.setTimeout((function(){document.documentElement.classList.remove("transition")}),500)},C=function(){return p(!d)},N=function(){S((function(e){localStorage.removeItem("userInfo"),localStorage.removeItem("companyInfo"),e({type:y}),e({type:_}),e({type:P}),e({type:w})}))};return Object(ee.jsx)(i.a,{children:Object(ee.jsxs)("div",{className:"App",children:[d&&Object(ee.jsx)(me,{toggleDrawer:C,logout:N,drawer:d}),h&&Object(ee.jsx)(me,{setViewReport:m,reportDetails:g,setReportDetails:v}),Object(ee.jsx)(te,{mode:n,toggleMode:function(){"light"===n?(E(),a("dark"),document.documentElement.setAttribute("data-theme","dark")):(E(),a("light"),document.documentElement.setAttribute("data-theme","light"))},toggleDrawer:C,logout:N}),Object(ee.jsxs)(u.d,{children:[Object(ee.jsx)(u.b,{path:"/",exact:!0,component:Re}),Object(ee.jsx)(u.b,{path:"/newpassword",exact:!0,component:ke}),Object(ee.jsx)(u.b,{path:"/search",render:function(e){return Object(ee.jsx)(Le,Object(s.a)(Object(s.a)({},e),{},{setViewReport:m,setReportDetails:v}))}}),Object(ee.jsx)(u.b,{path:"/newreport",exact:!0,component:Be}),Object(ee.jsx)(u.b,{path:"/editreport",render:function(e){return Object(ee.jsx)(qe,Object(s.a)(Object(s.a)({},e),{},{reportDetails:g,setReportDetails:v}))}}),Object(ee.jsx)(u.b,{path:"/company",exact:!0,component:ze}),Object(ee.jsx)(u.b,{path:"/addcompany",exact:!0,component:Ge}),Object(ee.jsx)(u.b,{path:"/profile",exact:!0,component:$e}),Object(ee.jsx)(u.a,{to:"/"})]})]})})};c.a.render(Object(ee.jsx)(l.a,{store:Q,children:Object(ee.jsx)(Je,{})}),document.getElementById("root"))},43:function(e,t,n){},44:function(e,t,n){},46:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},82:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){}},[[121,1,2]]]);
//# sourceMappingURL=main.7a250502.chunk.js.map